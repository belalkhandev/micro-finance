"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[781],{704:(e,t,r)=>{r.d(t,{Z:()=>a});var o=r(3645),s=r.n(o)()((function(e){return e[1]}));s.push([e.id,".dp__theme_light{--dp-primary-color:#3b82f6;--dp-icon-color:#3b82f6}",""]);const a=s},781:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Be});var o=r(821),s={class:"box"},a={class:"box-header"},l=(0,o._)("div",{class:"box-title"},[(0,o._)("h5",null,"Update DPS Application")],-1),i={class:"box-action"},n=(0,o.Uk)("DPS application list"),p={class:"box-body"},c={class:"row"},d={class:"col-md-8 offset-md-2"},m={class:"form-group"},u={class:"row"},_=(0,o._)("div",{class:"col-md-4 text-left"},[(0,o._)("label",{class:"col-form-label"},"Member")],-1),f={class:"col-md-8"},y=(0,o._)("span",{class:"select-icon"},[(0,o._)("i",{class:"bx bx-chevron-down"})],-1),b={class:"member-list"},v={class:"member-search"},h=[(0,o._)("i",{class:"bx bx-x"},null,-1)],w={class:"members"},g=["onClick"],k={key:0,class:"text-danger text-sm"},x={class:"form-group"},D={class:"row"},C=(0,o._)("div",{class:"col-md-4 text-left"},[(0,o._)("label",{class:"col-form-label"},"Deposit Amount")],-1),O={class:"col-md-8"},M={key:0,class:"text-danger text-sm"},A={class:"form-group"},P={class:"row"},U=(0,o._)("div",{class:"col-md-4 text-left"},[(0,o._)("label",{class:"col-form-label"},"Year")],-1),V={class:"col-md-8"},S={key:0,class:"text-danger text-sm"},L={class:"form-group"},j={class:"row"},z=(0,o._)("div",{class:"col-md-4 text-left"},[(0,o._)("label",{class:"col-form-label"},"Total Deposit")],-1),T={class:"col-md-8"},q={class:"form-group"},$={class:"row"},F=(0,o._)("div",{class:"col-md-4 text-left"},[(0,o._)("label",{class:"col-form-label"},"Total Receive/Getting")],-1),K={class:"col-md-8"},B={key:0,class:"text-danger text-sm"},E={class:"form-group"},I={class:"row"},Z=(0,o._)("div",{class:"col-md-4 text-left"},[(0,o._)("label",{class:"col-form-label"},"Profit")],-1),G={class:"col-md-8"},W={class:"form-group"},Y={class:"row"},H=(0,o._)("div",{class:"col-md-4 text-left"},[(0,o._)("label",{class:"col-form-label"},"Application Type")],-1),R={class:"col-md-8"},N={class:"mt-2"},J={class:"mr-4"},Q=(0,o._)("span",{class:"ml-1"},"Weekly",-1),X=(0,o._)("span",{class:"ml-1"},"Monthly",-1),ee={key:0,class:"text-danger text-sm"},te={class:"form-group"},re={class:"row"},oe=(0,o._)("div",{class:"col-md-4 text-left"},[(0,o._)("label",{class:"col-form-label"},"Start From")],-1),se={class:"col-md-8"},ae={class:"row"},le={class:"col-md-6"},ie=(0,o._)("option",{value:""},"Select Day",-1),ne=["value"],pe={key:0,class:"text-danger text-sm"},ce={class:"col-md-6"},de={key:0,class:"text-danger text-sm"},me={class:"form-group"},ue={class:"row"},_e=(0,o._)("div",{class:"col-md-4 text-left"},[(0,o._)("label",{class:"col-form-label"},"Status")],-1),fe={class:"col-md-8"},ye=[(0,o._)("option",{value:""},"Select",-1),(0,o._)("option",{value:"active"},"Active",-1),(0,o._)("option",{value:"inactive"},"Inactive",-1),(0,o._)("option",{value:"closed"},"Closed",-1)],be={class:"form-group mt-4 bg-yellow-50 p-2"},ve={class:"row"},he=(0,o._)("div",{class:"col-md-4 text-left"},[(0,o._)("label",{class:"col-form-label"},"Previous Calculation (Only for this application)")],-1),we={class:"col-md-8"},ge={class:"row"},ke={class:"col-md-12"},xe={class:"col-md-12 mt-2"},De={class:"form-floating mb-3"},Ce=(0,o._)("label",{for:"remarks"},"Comments",-1),Oe={class:"mt-8 text-right"},Me={type:"submit",class:"btn btn-primary",id:"updateApplication"},Ae=(0,o._)("div",{class:"spinner-border",role:"status"},[(0,o._)("span",{class:"visually-hidden"},"Loading...")],-1),Pe=(0,o._)("div",{class:"box-footer"},null,-1);var Ue=r(8637),Ve=r(9755),Se=r.n(Ve);function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Te={name:"Edit",mixins:[r(4118).B],data:function(){return{form:{member_id:"",dps_amount:"",total_dps:"",year:3,receiving:"",profit:"",dps_type:"weekly",w_day:"",m_date:"",prev_deposit:"",remarks:"",status:"",application_id:this.$route.params.application_id},monthly_date:"",member_input_text:"",search_key:"",errors:null,error:null,isOpen:!1}},computed:je(je({},(0,Ue.Se)({validation_errors:"validation_errors",error_message:"error_message",members:"member/searchData",application_types:"group/application_types",application:"dps/application",days:"group/days"})),{},{filterRoles:function(){return this.roles},filterMembers:function(){var e=this;return this.members.data&&this.members.data.length&&this.search_key.length>1?this.members.data.filter((function(t){return t.account_no.toLowerCase().includes(e.search_key.toLowerCase())||t.name.toLowerCase().includes(e.search_key.toLowerCase())||t.phone.toLowerCase().includes(e.search_key.toLowerCase())})):this.members}}),methods:je(je({},(0,Ue.nv)({getMembers:"member/getSearchData",getApplicationById:"dps/getApplicationById",updateApplication:"dps/editApplication"})),{},{showMemberList:function(){this.isOpen=!this.isOpen,Se()(".member-input .form-control").focus()},closeMemberList:function(){this.isOpen=!this.isOpen},chooseMember:function(e){this.form.member_id=e.id,this.member_input_text=e.account_no+"-"+e.name+"-"+e.phone+" ("+this.ucFirst(e.member_type)+")","deposit_weekly"===e.member_type||"loan"===e.member_type?(this.form.w_day=e.day,this.form.dps_type="weekly",Se()(".dp__disabled").prop("disabled",!0),Se()("#w_day").prop("disabled",!1),this.form.m_date=""):"deposit_monthly"===e.member_type&&(Se()("#w_day").prop("disabled",!0),Se()(".dp__disabled").prop("disabled",!1),this.form.dps_type="monthly",this.form.w_day=""),this.search_key="",this.isOpen=!this.isOpen,this.dpsCalculation()},dpsType:function(){"weekly"===this.form.dps_type?(Se()(".dp__disabled").prop("disabled",!0),Se()("#w_day").prop("disabled",!1),this.form.m_date=""):(Se()("#w_day").prop("disabled",!0),Se()(".dp__disabled").prop("disabled",!1),this.form.w_day=""),this.dpsCalculation()},dpsCalculation:function(){var e=0;e="weekly"===this.form.dps_type?52*this.form.year:12*this.form.year,this.form.total_dps=e*this.form.dps_amount,this.form.profit=this.form.receiving-this.form.total_dps},updateDpsApplication:function(){var e=this;Se()("#updateApplication").prop("disabled",!0).addClass("submitted");var t=this.form;this.updateApplication(t).then((function(){e.validation_errors||e.error_message?(e.errors=e.validation_errors,e.error=e.error_message):(e.errors=e.error=null,Object.assign(e.$data,e.$options.data.apply(e)),e.$swal({icon:"success",title:"Updated!",text:"Dps Application has been updated successfully",timer:3e3}),e.$router.push({name:"showDPSApplication",params:{application_id:e.form.application_id}})),Se()("#updateApplication").prop("disabled",!1).removeClass("submitted")}))}}),mounted:function(){var e=this;this.members||this.getMembers(),this.getApplicationById(this.form.application_id).then((function(){e.application||e.$router.push({name:"PageNotFound"});var t=e.application;e.form.member_id=t.member_id,e.form.dps_amount=t.dps_amount,e.form.total_dps=t.total_amount,e.form.year=t.year,e.form.receiving=t.receiving,e.form.profit=t.profit,e.form.dps_type=t.dps_type,e.form.w_day=t.w_day?t.w_day:"",e.monthly_date=t.m_date,e.form.prev_deposit=t.prev_deposit,e.form.remarks=t.remarks,e.form.status=t.status,e.member_input_text=t.member.account_no+"-"+t.member.name+"-"+t.member.phone+" ("+e.ucFirst(t.member.member_type)+")"}))},watch:{monthly_date:function(){this.form.m_date=this.datePickerFormat(this.monthly_date)}}};var qe=r(2446),$e=r.n(qe),Fe=r(704),Ke={insert:"head",singleton:!1};$e()(Fe.Z,Ke);Fe.Z.locals;const Be=(0,r(3744).Z)(Te,[["render",function(e,t,r,Ue,Ve,Se){var Le=(0,o.up)("router-link"),je=(0,o.up)("Datepicker");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",a,[l,(0,o._)("div",i,[(0,o.Wm)(Le,{to:{name:"ApplicationDPS"},class:"btn btn-primary btn-sm"},{default:(0,o.w5)((function(){return[n]})),_:1})])]),(0,o._)("div",p,[(0,o._)("form",{onSubmit:t[21]||(t[21]=(0,o.iM)((function(){return Se.updateDpsApplication&&Se.updateDpsApplication.apply(Se,arguments)}),["prevent"]))},[(0,o._)("div",c,[(0,o._)("div",d,[(0,o._)("div",m,[(0,o._)("div",u,[_,(0,o._)("div",f,[(0,o._)("div",{class:(0,o.C_)(["member-select",{open:Ve.isOpen}])},[(0,o._)("div",{class:"member-input",onClick:t[1]||(t[1]=(0,o.iM)((function(){return Se.showMemberList&&Se.showMemberList.apply(Se,arguments)}),["prevent"]))},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return Ve.member_input_text=e}),class:"form-control",placeholder:"Choose Member",readonly:""},null,512),[[o.nr,Ve.member_input_text]]),y]),(0,o._)("div",b,[(0,o._)("div",v,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(e){return Ve.search_key=e}),placeholder:"Search by account no, name, phone",class:"form-control"},null,512),[[o.nr,Ve.search_key]]),(0,o._)("span",{class:"list-close",onClick:t[3]||(t[3]=function(){return Se.closeMemberList&&Se.closeMemberList.apply(Se,arguments)})},h)]),(0,o._)("div",w,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Se.filterMembers,(function(t,r){return(0,o.wg)(),(0,o.iD)("div",{class:"member",key:t.id,onClick:(0,o.iM)((function(e){return Se.chooseMember(t)}),["prevent"])},[(0,o._)("p",null,(0,o.zw)(t.account_no)+" - "+(0,o.zw)(t.name)+" - "+(0,o.zw)(t.phone)+" ("+(0,o.zw)(e.ucFirst(t.member_type))+")",1)],8,g)})),128))])])],2),Ve.errors?((0,o.wg)(),(0,o.iD)("span",k,(0,o.zw)(Ve.errors.member_id?Ve.errors.member_id[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",x,[(0,o._)("div",D,[C,(0,o._)("div",O,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=function(e){return Ve.form.dps_amount=e}),placeholder:"Enter deposit amount",class:"form-control",onKeyup:t[5]||(t[5]=function(){return Se.dpsCalculation&&Se.dpsCalculation.apply(Se,arguments)})},null,544),[[o.nr,Ve.form.dps_amount]]),Ve.errors?((0,o.wg)(),(0,o.iD)("span",M,(0,o.zw)(Ve.errors.dps_amount?Ve.errors.dps_amount[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",A,[(0,o._)("div",P,[U,(0,o._)("div",V,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=function(e){return Ve.form.year=e}),placeholder:"0",class:"form-control",onKeyup:t[7]||(t[7]=function(){return Se.dpsCalculation&&Se.dpsCalculation.apply(Se,arguments)})},null,544),[[o.nr,Ve.form.year]]),Ve.errors?((0,o.wg)(),(0,o.iD)("span",S,(0,o.zw)(Ve.errors.year?Ve.errors.year[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",L,[(0,o._)("div",j,[z,(0,o._)("div",T,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=function(e){return Ve.form.total_dps=e}),placeholder:"0",class:"form-control",readonly:""},null,512),[[o.nr,Ve.form.total_dps]])])])]),(0,o._)("div",q,[(0,o._)("div",$,[F,(0,o._)("div",K,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=function(e){return Ve.form.receiving=e}),placeholder:"0",class:"form-control",onKeyup:t[10]||(t[10]=function(){return Se.dpsCalculation&&Se.dpsCalculation.apply(Se,arguments)})},null,544),[[o.nr,Ve.form.receiving]]),Ve.errors?((0,o.wg)(),(0,o.iD)("span",B,(0,o.zw)(Ve.errors.receiving?Ve.errors.receiving[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",E,[(0,o._)("div",I,[Z,(0,o._)("div",G,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=function(e){return Ve.form.profit=e}),placeholder:"0",class:"form-control",readonly:""},null,512),[[o.nr,Ve.form.profit]])])])]),(0,o._)("div",W,[(0,o._)("div",Y,[H,(0,o._)("div",R,[(0,o._)("div",N,[(0,o._)("label",J,[(0,o.wy)((0,o._)("input",{type:"radio",name:"application_type",value:"weekly","onUpdate:modelValue":t[12]||(t[12]=function(e){return Ve.form.dps_type=e}),onChange:t[13]||(t[13]=function(){return Se.dpsType&&Se.dpsType.apply(Se,arguments)})},null,544),[[o.G2,Ve.form.dps_type]]),Q]),(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{type:"radio",name:"application_type",value:"monthly","onUpdate:modelValue":t[14]||(t[14]=function(e){return Ve.form.dps_type=e}),onChange:t[15]||(t[15]=function(){return Se.dpsType&&Se.dpsType.apply(Se,arguments)})},null,544),[[o.G2,Ve.form.dps_type]]),X])]),Ve.errors?((0,o.wg)(),(0,o.iD)("span",ee,(0,o.zw)(Ve.errors.dps_type?Ve.errors.dps_type[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",te,[(0,o._)("div",re,[oe,(0,o._)("div",se,[(0,o._)("div",ae,[(0,o._)("div",le,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[16]||(t[16]=function(e){return Ve.form.w_day=e}),class:"form-control",id:"w_day"},[ie,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.days,(function(e,t){return(0,o.wg)(),(0,o.iD)("option",{value:e.code},(0,o.zw)(e.name),9,ne)})),256))],512),[[o.bM,Ve.form.w_day]]),Ve.errors?((0,o.wg)(),(0,o.iD)("span",pe,(0,o.zw)(Ve.errors.w_day?Ve.errors.w_day[0]:""),1)):(0,o.kq)("",!0)]),(0,o._)("div",ce,[(0,o.Wm)(je,{modelValue:Ve.monthly_date,"onUpdate:modelValue":t[17]||(t[17]=function(e){return Ve.monthly_date=e}),format:"dd-MM-yyyy",enableTimePicker:!1,autoApply:"",placeholder:"Select Date",id:"m_date"},null,8,["modelValue"]),Ve.errors?((0,o.wg)(),(0,o.iD)("span",de,(0,o.zw)(Ve.errors.m_date?Ve.errors.m_date[0]:""),1)):(0,o.kq)("",!0)])])])])]),(0,o._)("div",me,[(0,o._)("div",ue,[_e,(0,o._)("div",fe,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[18]||(t[18]=function(e){return Ve.form.status=e}),class:"form-control select-wrapper"},ye,512),[[o.bM,Ve.form.status]])])])]),(0,o._)("div",be,[(0,o._)("div",ve,[he,(0,o._)("div",we,[(0,o._)("div",ge,[(0,o._)("div",ke,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=function(e){return Ve.form.prev_deposit=e}),class:"form-control",placeholder:"Previous Deposit"},null,512),[[o.nr,Ve.form.prev_deposit]])]),(0,o._)("div",xe,[(0,o._)("div",De,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[20]||(t[20]=function(e){return Ve.form.remarks=e}),class:"form-control",id:"remarks",placeholder:"Leave a comments here"},null,512),[[o.nr,Ve.form.remarks]]),Ce])])])])])]),(0,o._)("div",Oe,[(0,o._)("button",Me,[(0,o._)("span",null,(0,o.zw)(e.$t("update")),1),Ae])])])])],32)]),Pe])}]])}}]);