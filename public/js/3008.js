"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3008],{1629:(t,e,a)=>{a.d(e,{Z:()=>s});var i=a(3645),n=a.n(i)()((function(t){return t[1]}));n.push([t.id,".btn.btn-sm.btn-outline-info.btn-text{line-height:1}.member-select .member-list{z-index:999}.widget .widget-body p{color:#000}",""]);const s=n},7823:(t,e,a)=>{a.d(e,{Z:()=>p});var i=a(821);var n=(t,e)=>{const a=t.__vccOpts||t;for(const[t,i]of e)a[t]=i;return a};const s={inheritAttrs:!1,emits:["pagination-change-page"],components:{RenderlessLaravelVuePagination:{emits:["pagination-change-page"],props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},showDisabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator:t=>-1!==["small","default","large"].indexOf(t)},align:{type:String,default:"left",validator:t=>-1!==["left","center","right"].indexOf(t)}},computed:{isApiResource(){return!!this.data.meta},currentPage(){return this.isApiResource?this.data.meta.current_page:this.data.current_page},firstPageUrl(){return this.isApiResource?this.data.links.first:null},from(){return this.isApiResource?this.data.meta.from:this.data.from},lastPage(){return this.isApiResource?this.data.meta.last_page:this.data.last_page},lastPageUrl(){return this.isApiResource?this.data.links.last:null},nextPageUrl(){return this.isApiResource?this.data.links.next:this.data.next_page_url},perPage(){return this.isApiResource?this.data.meta.per_page:this.data.per_page},prevPageUrl(){return this.isApiResource?this.data.links.prev:this.data.prev_page_url},to(){return this.isApiResource?this.data.meta.to:this.data.to},total(){return this.isApiResource?this.data.meta.total:this.data.total},pageRange(){if(-1===this.limit)return 0;if(0===this.limit)return this.lastPage;for(var t,e=this.currentPage,a=this.lastPage,i=this.limit,n=e-i,s=e+i+1,r=[],o=[],l=1;l<=a;l++)(1===l||l===a||l>=n&&l<s)&&r.push(l);return r.forEach((function(e){t&&(e-t==2?o.push(t+1):e-t!=1&&o.push("...")),o.push(e),t=e})),o}},methods:{previousPage(){this.selectPage(this.currentPage-1)},nextPage(){this.selectPage(this.currentPage+1)},selectPage(t){"..."!==t&&this.$emit("pagination-change-page",t)}},render(){return this.$slots.default({data:this.data,limit:this.limit,showDisabled:this.showDisabled,size:this.size,align:this.align,computed:{isApiResource:this.isApiResource,currentPage:this.currentPage,firstPageUrl:this.firstPageUrl,from:this.from,lastPage:this.lastPage,lastPageUrl:this.lastPageUrl,nextPageUrl:this.nextPageUrl,perPage:this.perPage,prevPageUrl:this.prevPageUrl,to:this.to,total:this.total,pageRange:this.pageRange},prevButtonEvents:{click:t=>{t.preventDefault(),this.previousPage()}},nextButtonEvents:{click:t=>{t.preventDefault(),this.nextPage()}},pageButtonEvents:t=>({click:e=>{e.preventDefault(),this.selectPage(t)}})})}}},props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},showDisabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator:t=>-1!==["small","default","large"].indexOf(t)},align:{type:String,default:"left",validator:t=>-1!==["left","center","right"].indexOf(t)}},methods:{onPaginationChangePage(t){this.$emit("pagination-change-page",t)}}},r=["tabindex"],o=(0,i._)("span",{"aria-hidden":"true"},"«",-1),l=(0,i._)("span",{class:"sr-only"},"Previous",-1),c={key:0,class:"sr-only"},u=["tabindex"],d=(0,i._)("span",{"aria-hidden":"true"},"»",-1),m=(0,i._)("span",{class:"sr-only"},"Next",-1);var p=n(s,[["render",function(t,e,a,n,s,p){const g=(0,i.up)("RenderlessLaravelVuePagination");return(0,i.wg)(),(0,i.j4)(g,{data:a.data,limit:a.limit,"show-disabled":a.showDisabled,size:a.size,align:a.align,onPaginationChangePage:p.onPaginationChangePage},{default:(0,i.w5)((e=>[e.computed.total>e.computed.perPage?((0,i.wg)(),(0,i.iD)("ul",(0,i.dG)({key:0},t.$attrs,{class:["pagination",{"pagination-sm":"small"==e.size,"pagination-lg":"large"==e.size,"justify-content-center":"center"==e.align,"justify-content-end":"right"==e.align}]}),[e.computed.prevPageUrl||e.showDisabled?((0,i.wg)(),(0,i.iD)("li",{key:0,class:(0,i.C_)(["page-item pagination-prev-nav",{disabled:!e.computed.prevPageUrl}])},[(0,i._)("a",(0,i.dG)({class:"page-link",href:"#","aria-label":"Previous",tabindex:!e.computed.prevPageUrl&&-1},(0,i.mx)(e.prevButtonEvents)),[(0,i.WI)(t.$slots,"prev-nav",{},(()=>[o,l]))],16,r)],2)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.computed.pageRange,((t,a)=>((0,i.wg)(),(0,i.iD)("li",{class:(0,i.C_)(["page-item pagination-page-nav",{active:t==e.computed.currentPage}]),key:a},[(0,i._)("a",(0,i.dG)({class:"page-link",href:"#"},(0,i.mx)(e.pageButtonEvents(t))),[(0,i.Uk)((0,i.zw)(t)+" ",1),t==e.computed.currentPage?((0,i.wg)(),(0,i.iD)("span",c,"(current)")):(0,i.kq)("",!0)],16)],2)))),128)),e.computed.nextPageUrl||e.showDisabled?((0,i.wg)(),(0,i.iD)("li",{key:1,class:(0,i.C_)(["page-item pagination-next-nav",{disabled:!e.computed.nextPageUrl}])},[(0,i._)("a",(0,i.dG)({class:"page-link",href:"#","aria-label":"Next",tabindex:!e.computed.nextPageUrl&&-1},(0,i.mx)(e.nextButtonEvents)),[(0,i.WI)(t.$slots,"next-nav",{},(()=>[d,m]))],16,u)],2)):(0,i.kq)("",!0)],16)):(0,i.kq)("",!0)])),_:3},8,["data","limit","show-disabled","size","align","onPaginationChangePage"])}]])},3008:(t,e,a)=>{a.r(e),a.d(e,{default:()=>et});var i=a(821),n={key:0,class:"widget widget-secondary mb-4"},s=(0,i._)("div",{class:"widget-header"},[(0,i._)("h5",{class:"title"},"Filtering"),(0,i._)("span",null,[(0,i._)("i",{class:"bx bx-filter-alt"})])],-1),r={class:"widget-body"},o={class:"row"},l={class:"col-md-3"},c=(0,i._)("span",{class:"select-icon"},[(0,i._)("i",{class:"bx bx-chevron-down"})],-1),u={class:"member-list"},d={class:"member-search"},m=[(0,i._)("i",{class:"bx bx-x"},null,-1)],p={class:"members"},g=["onClick"],h={class:"col-md-3"},f={class:"col-md-3"},_={class:"col-md-2"},b=[(0,i._)("option",{value:""},"Savings Status",-1),(0,i._)("option",{value:"deposit"},"Deposit",-1),(0,i._)("option",{value:"withdraw"},"Withdraw",-1)],v={class:"col-md-1"},w=(0,i._)("button",{type:"submit",class:"btn btn-sm btn-success"},"Filter",-1),y={class:"row"},P={class:"col-md-12"},k={class:"box"},x={class:"box-header"},S=(0,i._)("div",{class:"box-title"},[(0,i._)("h4",null,"Savings transactions report")],-1),D={class:"box-action"},O={class:"box-body"},C={class:"table"},R=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"#"),(0,i._)("th",null,"Member"),(0,i._)("th",null,"Deposit Amt."),(0,i._)("th",null,"Withdraw Amt."),(0,i._)("th",null,"Beginning Balance"),(0,i._)("th",null,"Ending Balance"),(0,i._)("th",null,"Status"),(0,i._)("th",null,"Created")])],-1),z={class:"application-member"},M=["src"],U={key:0},A={key:1},F={key:0},j={key:1},L=["innerHTML"],T={key:1},B=[(0,i._)("td",{colspan:"9"},"No data found",-1)],V={class:"box-footer text-right"},E={key:0,class:"pagination"},W={class:"pagination-data"},q=(0,i._)("div",{class:"col-md-4"},null,-1);var H=a(8637),I=a(7823),Z=a(9755),$=a.n(Z);function N(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function G(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?N(Object(a),!0).forEach((function(e){Y(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Y(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const K={name:"SavingsTransactionsReport",components:{Pagination:I.Z},data:function(){return{is_filter_pagination:!1,form:{from_date:"",to_date:"",member_id:"",status:""},from_date:"",to_date:"",member_input_text:"",search_key:"",isOpen:!1,openFilter:!1}},computed:G(G({},(0,H.Se)({savings:"savings/savings_transactions",members:"member/searchData"})),{},{filterSavings:function(){return this.savings},filterMembers:function(){var t=this;return this.members&&this.members.length&&this.search_key.length>1?this.members.filter((function(e){return e.account_no.toLowerCase().includes(t.search_key.toLowerCase())||e.name.toLowerCase().includes(t.search_key.toLowerCase())||e.phone.toLowerCase().includes(t.search_key.toLowerCase())})):this.members}}),methods:G(G({},(0,H.nv)({getSavingsTransactions:"savings/getSavingsTransactions",filterSavingsTransactions:"savings/filterSavingsTransactions"})),{},{getResults:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.is_filter_pagination){var e=this.form;e.page=t,this.filterSavingsTransactions(e)}else this.getSavingsTransactions(t)},showMemberList:function(){this.isOpen=!this.isOpen,$()(".member-input .form-control").focus()},closeMemberList:function(){this.isOpen=!this.isOpen},chooseMember:function(t){this.form.member_id=t.id,this.member_input_text=t.account_no+"-"+t.name,this.search_key="",this.isOpen=!this.isOpen},filterSubmit:function(){this.is_filter_pagination=!0,this.filterSavingsTransactions(this.form)},clearFilterForm:function(){this.is_filter_pagination=!1,this.getResults(1),this.form.member_id="",this.form.from_date="",this.form.to_date="",this.form.status="",this.member_input_text="",this.from_date="",this.to_date=""},downloadSavingsApplicationsReport:function(){var t="";this.form.member_id&&this.form.member_id!==this.lastMemberId&&(t+="?member_id=".concat(this.form.member_id),this.lastMemberId=this.form.member_id),this.form.from_date&&(t+="".concat(t?"&":"?","from_date=").concat(this.form.from_date)),this.form.to_date&&(t+="".concat(t?"&":"?","to_date=").concat(this.form.to_date)),this.form.status&&(t+="".concat(t?"&":"?","status=").concat(this.form.status)),window.open("".concat(window.location.origin,"/download/savings/transactions").concat(t))}}),mounted:function(){this.getResults(1)},watch:{from_date:function(){var t=this.datePickerFormat(this.from_date);this.form.from_date="Invalid date"!=t?t:""},to_date:function(){var t=this.datePickerFormat(this.to_date);this.form.to_date="Invalid date"!=t?t:""}}};var J=a(2446),Q=a.n(J),X=a(1629),tt={insert:"head",singleton:!1};Q()(X.Z,tt);X.Z.locals;const et=(0,a(3744).Z)(K,[["render",function(t,e,a,H,I,Z){var $=(0,i.up)("Datepicker"),N=(0,i.up)("router-link"),G=(0,i.up)("Pagination");return(0,i.wg)(),(0,i.iD)(i.HY,null,[I.openFilter?((0,i.wg)(),(0,i.iD)("div",n,[s,(0,i._)("div",r,[(0,i._)("form",{onSubmit:e[8]||(e[8]=(0,i.iM)((function(){return Z.filterSubmit&&Z.filterSubmit.apply(Z,arguments)}),["prevent"]))},[(0,i._)("div",o,[(0,i._)("div",l,[(0,i._)("div",{class:(0,i.C_)(["member-select",{open:I.isOpen}])},[(0,i._)("div",{class:"member-input",onClick:e[1]||(e[1]=(0,i.iM)((function(){return Z.showMemberList&&Z.showMemberList.apply(Z,arguments)}),["prevent"]))},[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=function(t){return I.member_input_text=t}),class:"form-control",placeholder:"Choose Member",readonly:""},null,512),[[i.nr,I.member_input_text]]),c]),(0,i._)("div",u,[(0,i._)("div",d,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=function(t){return I.search_key=t}),placeholder:"Search by account no, name, phone",class:"form-control"},null,512),[[i.nr,I.search_key]]),(0,i._)("span",{class:"list-close",onClick:e[3]||(e[3]=function(){return Z.closeMemberList&&Z.closeMemberList.apply(Z,arguments)})},m)]),(0,i._)("div",p,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Z.filterMembers,(function(t,e){return(0,i.wg)(),(0,i.iD)("div",{class:"member text-left",key:t.id,onClick:(0,i.iM)((function(e){return Z.chooseMember(t)}),["prevent"])},[(0,i._)("p",null,(0,i.zw)(t.account_no)+" - "+(0,i.zw)(t.name)+" - "+(0,i.zw)(t.phone),1)],8,g)})),128))])])],2)]),(0,i._)("div",h,[(0,i.Wm)($,{modelValue:I.from_date,"onUpdate:modelValue":e[4]||(e[4]=function(t){return I.from_date=t}),format:"dd-MM-yyyy",enableTimePicker:!1,autoApply:"",placeholder:"Select From Date"},null,8,["modelValue"])]),(0,i._)("div",f,[(0,i.Wm)($,{modelValue:I.to_date,"onUpdate:modelValue":e[5]||(e[5]=function(t){return I.to_date=t}),format:"dd-MM-yyyy",enableTimePicker:!1,autoApply:"",placeholder:"Select To Date"},null,8,["modelValue"])]),(0,i._)("div",_,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[6]||(e[6]=function(t){return I.form.status=t}),class:"form-control"},b,512),[[i.bM,I.form.status]])]),(0,i._)("div",v,[w,I.is_filter_pagination?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",onClick:e[7]||(e[7]=(0,i.iM)((function(){return Z.clearFilterForm&&Z.clearFilterForm.apply(Z,arguments)}),["prevent"])),class:"btn btn-sm btn-danger ml-2"},"Clear")):(0,i.kq)("",!0)])])],32)])])):(0,i.kq)("",!0),(0,i._)("div",y,[(0,i._)("div",P,[(0,i._)("div",k,[(0,i._)("div",x,[S,(0,i._)("div",D,[(0,i._)("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:e[9]||(e[9]=function(t){return I.openFilter=!I.openFilter})},"Filter"),(0,i._)("button",{class:"btn btn-sm btn-primary",onClick:e[10]||(e[10]=function(){return Z.downloadSavingsApplicationsReport&&Z.downloadSavingsApplicationsReport.apply(Z,arguments)})},"Download")])]),(0,i._)("div",O,[(0,i._)("table",C,[R,(0,i._)("tbody",null,[Z.filterSavings&&Z.filterSavings.data?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(Z.filterSavings.data,(function(e,a){return(0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",null,(0,i.zw)(Z.filterSavings.from+a),1),(0,i._)("td",null,[(0,i._)("div",z,[(0,i._)("img",{src:e.member?e.member.photo:"",alt:"",class:"w-8 rounded"},null,8,M),(0,i._)("div",null,[(0,i.Wm)(N,{to:{name:"MemberShow",params:{member_id:e.member_id}},class:"text-primary"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,i.zw)(e.member.name),1)]})),_:2},1032,["to"]),(0,i._)("p",null,"Acc. no: "+(0,i.zw)(e.member.account_no),1)])])]),(0,i._)("td",null,["deposit"==e.savings_type?((0,i.wg)(),(0,i.iD)("span",U,(0,i.zw)(t.numberFormat(e.amount,2)),1)):((0,i.wg)(),(0,i.iD)("span",A,"-"))]),(0,i._)("td",null,["withdraw"==e.savings_type?((0,i.wg)(),(0,i.iD)("span",F,(0,i.zw)(t.numberFormat(e.amount,2)),1)):((0,i.wg)(),(0,i.iD)("span",j,"-"))]),(0,i._)("td",null,(0,i.zw)(t.numberFormat(e.beginning_balance,2)),1),(0,i._)("td",null,(0,i.zw)(t.numberFormat(e.ending_balance,2)),1),(0,i._)("td",{innerHTML:t.getStatusFormat(e.savings_type)},null,8,L),(0,i._)("td",null,(0,i.zw)(t.userFormattedDate(e.created_at)),1)])})),128)):((0,i.wg)(),(0,i.iD)("tr",T,B))])])]),(0,i._)("div",V,[Z.filterSavings?((0,i.wg)(),(0,i.iD)("div",E,[(0,i._)("p",W," Page "+(0,i.zw)(Z.filterSavings.current_page)+" Showing "+(0,i.zw)(Z.filterSavings.from)+" to "+(0,i.zw)(Z.filterSavings.to)+" of "+(0,i.zw)(Z.filterSavings.total)+" Data ",1),(0,i.Wm)(G,{data:Z.filterSavings,onPaginationChangePage:Z.getResults,limit:6},null,8,["data","onPaginationChangePage"])])):(0,i.kq)("",!0)])])]),q])],64)}]])}}]);