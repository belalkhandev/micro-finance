"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[776],{422:(t,e,n)=>{n.d(e,{Z:()=>l});var a=n(3645),i=n.n(a)()((function(t){return t[1]}));i.push([t.id,".btn.btn-sm.btn-outline-info.btn-text{line-height:1}",""]);const l=i},8776:(t,e,n)=>{n.r(e),n.d(e,{default:()=>rt});var a=n(821),i={class:"row"},l={class:"col-md-12"},s={class:"mb-4"},o={key:0,class:"row"},r={class:"col-md-4"},c={class:"widget widget-primary animate__animated animate__fadeIn"},u=(0,a._)("div",{class:"widget-header"},[(0,a._)("h5",{class:"title"},"Total DPS"),(0,a._)("span",null,[(0,a._)("i",{class:"bx bx-group"})])],-1),p={class:"widget-body"},d={class:"col-md-4"},_={class:"widget widget-success animate__animated animate__fadeIn"},m=(0,a._)("div",{class:"widget-header"},[(0,a._)("h5",{class:"title"},"Total Collection"),(0,a._)("span",null,[(0,a._)("i",{class:"bx bx-group"})])],-1),g={class:"widget-body"},h={class:"col-md-4"},b={class:"widget widget-danger animate__animated animate__fadeIn"},w=(0,a._)("div",{class:"widget-header"},[(0,a._)("h5",{class:"title"},"Due Amount"),(0,a._)("span",null,[(0,a._)("i",{class:"bx bx-group"})])],-1),f={class:"widget-body"},v={class:"box"},y={class:"box-header"},k=(0,a._)("div",{class:"box-title"},[(0,a._)("h4",null,"DPS application list")],-1),x={class:"box-action"},C={class:"search-form"},D={class:"search-group"},P=[(0,a._)("i",{class:"bx bx-search-alt"},null,-1)],A=(0,a.Uk)("New DPS Application"),O={class:"box-body"},z={class:"table"},S=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"#"),(0,a._)("th",null,"Acc. No"),(0,a._)("th",null,"Member"),(0,a._)("th",null,"Photo"),(0,a._)("th",null,"Deposit"),(0,a._)("th",null,"Year"),(0,a._)("th",null,"Total Deposit"),(0,a._)("th",null,"Total Getting"),(0,a._)("th",null,"Profit"),(0,a._)("th",null,"Created at"),(0,a._)("th")])],-1),j=["src"],F=(0,a._)("br",null,null,-1),W={class:"action"},T=(0,a._)("i",{class:"bx bx-edit"},null,-1),U=["onClick"],B=[(0,a._)("i",{class:"bx bx-trash"},null,-1)],L={key:1},M=[(0,a._)("td",{colspan:"9"},"No application found",-1)],Y={class:"box-footer text-right"},q={key:0,class:"pagination"},I={class:"pagination-data"},Z={class:"page-item"},E=[(0,a._)("i",{class:"bx bx-chevrons-left"},null,-1)],N={class:"page-item"},$=[(0,a._)("i",{class:"bx bx-chevron-left"},null,-1)],H={class:"page-item"},K=["onClick"],G={class:"page-item"},R=[(0,a._)("i",{class:"bx bx-chevron-right"},null,-1)],V={class:"page-item"},J=[(0,a._)("i",{class:"bx bx-chevrons-right"},null,-1)],Q=(0,a._)("div",{class:"col-md-4"},null,-1);var X=n(8637);function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){nt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const at={name:"Index",mixins:[n(4118).B],data:function(){return{}},computed:et(et({},(0,X.Se)({applications:"dps/applications",dps_total:"dps/statistics"})),{},{filterApplications:function(){var t=this;return this.applications?this.search_key?this.paginate(this.applications.filter((function(e){return e.member.account_no.toLowerCase().includes(t.search_key.toLowerCase())||e.member.phone.toLowerCase().includes(t.search_key.toLowerCase())}))):this.paginate(this.applications):this.applications}}),methods:et(et({},(0,X.nv)({getApplications:"dps/getApplications",getTotalDps:"dps/getDpsStatistics",deleteApplication:"dps/deleteApplication"})),{},{deleteConfirm:function(t){var e=this;this.hasPermission("delete_application")?this.$swal({title:"Really want to delete!",text:"Are you sure? You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#5430d6",confirmButtonText:"Yes, Delete it!",cancelButtonColor:"#c82333"}).then((function(n){n.isConfirmed&&e.deleteApplication(t).then((function(){e.error_message?e.error=e.error_message:e.$swal({icon:"success",title:"Congratulation!",text:"User has been deleted successfully"})}))})):this.message403()},withdrawApplication:function(){this.$swal({icon:"warning",title:"Coming Soon!",text:"Withdrawal feature is under-construction, it will release in shortly"})},setPages:function(){for(var t=Math.ceil(this.applications?this.applications.length/this.per_page:0),e=1;e<=t;e++)this.pages.push(e)}}),mounted:function(){var t=this;this.applications||this.getApplications().then((function(){t.setPages()})),this.setPages(),this.getTotalDps()}};var it=n(2446),lt=n.n(it),st=n(422),ot={insert:"head",singleton:!1};lt()(st.Z,ot);st.Z.locals;const rt=(0,n(3744).Z)(at,[["render",function(t,e,n,X,tt,et){var nt=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",l,[(0,a._)("div",s,[t.dps_total?((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",r,[(0,a._)("div",c,[u,(0,a._)("div",p,[(0,a.Wm)(nt,{to:"/members"},{default:(0,a.w5)((function(){return[(0,a._)("h3",null,(0,a.zw)(t.numberFormat(t.dps_total.total_amounts,2)),1)]})),_:1})])])]),(0,a._)("div",d,[(0,a._)("div",_,[m,(0,a._)("div",g,[(0,a.Wm)(nt,{to:"/members"},{default:(0,a.w5)((function(){return[(0,a._)("h3",null,(0,a.zw)(t.numberFormat(t.dps_total.collections,2)),1)]})),_:1})])])]),(0,a._)("div",h,[(0,a._)("div",b,[w,(0,a._)("div",f,[(0,a.Wm)(nt,{to:"/members"},{default:(0,a.w5)((function(){return[(0,a._)("h3",null,(0,a.zw)(t.numberFormat(t.dps_total.dues,2)),1)]})),_:1})])])])])):(0,a.kq)("",!0)]),(0,a._)("div",v,[(0,a._)("div",y,[k,(0,a._)("div",x,[(0,a._)("div",{class:(0,a.C_)(["search",t.is_open_search?"open-search":""])},[(0,a._)("div",C,[(0,a._)("div",D,[(0,a.wy)((0,a._)("input",{type:"search","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.search_key=e}),placeholder:"Search keyword",class:"form-control"},null,512),[[a.nr,t.search_key]])])]),(0,a._)("button",{type:"button",class:"btn btn-secondary btn-sm focus:shadow-none",onClick:e[1]||(e[1]=function(e){return t.openSearch()})},P)],2),(0,a.Wm)(nt,{to:{name:"CreateDPS"},class:"btn btn-sm btn-primary"},{default:(0,a.w5)((function(){return[A]})),_:1})])]),(0,a._)("div",O,[(0,a._)("table",z,[S,(0,a._)("tbody",null,[et.filterApplications?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(et.filterApplications,(function(n,i){return(0,a.wg)(),(0,a.iD)("tr",{key:n.id},[(0,a._)("td",null,(0,a.zw)(i+1),1),(0,a._)("td",null,(0,a.zw)(n.member_account_no),1),(0,a._)("td",null,[(0,a.Wm)(nt,{to:{name:"MemberShow",params:{member_id:n.member_id}},class:"text-primary"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,a.zw)(n.member_name),1)]})),_:2},1032,["to"])]),(0,a._)("td",null,[(0,a._)("img",{src:n.member?n.member.photo:"",alt:"",class:"w-8 rounded"},null,8,j)]),(0,a._)("td",null,[(0,a.Uk)((0,a.zw)(t.numberFormat(n.dps_amount,2))+" ",1),F,(0,a.Uk)(" ("+(0,a.zw)(t.ucFirst(n.dps_type))+")",1)]),(0,a._)("td",null,(0,a.zw)(n.year),1),(0,a._)("td",null,(0,a.zw)(t.numberFormat(n.total_amount,2)),1),(0,a._)("td",null,(0,a.zw)(t.numberFormat(n.receiving,2)),1),(0,a._)("td",null,(0,a.zw)(t.numberFormat(n.profit,2)),1),(0,a._)("td",null,(0,a.zw)(t.userFormattedDate(n.created_at)),1),(0,a._)("td",null,[(0,a._)("div",W,[(0,a._)("a",{href:"#",class:"btn btn-sm btn-outline-info btn-text",onClick:e[2]||(e[2]=(0,a.iM)((function(){return et.withdrawApplication&&et.withdrawApplication.apply(et,arguments)}),["prevent"]))},"Withdraw"),(0,a.Wm)(nt,{to:{name:"EditDPSApplication",params:{application_id:n.id}},class:"btn btn-outline-warning btn-sm"},{default:(0,a.w5)((function(){return[T]})),_:2},1032,["to"]),(0,a._)("a",{href:"#",class:"btn btn-outline-danger btn-sm",onClick:(0,a.iM)((function(t){return et.deleteConfirm(n.id)}),["prevent"])},B,8,U)])])])})),128)):((0,a.wg)(),(0,a.iD)("tr",L,M))])])]),(0,a._)("div",Y,[t.applications&&t.applications.length>t.per_page?((0,a.wg)(),(0,a.iD)("div",q,[(0,a._)("p",I," Page no "+(0,a.zw)(t.page)+" Show "+(0,a.zw)(t.page===t.pages.length?t.applications?t.applications.length:0:t.page*(et.filterApplications?et.filterApplications.length:0))+" of "+(0,a.zw)(t.applications?t.applications.length:0)+" Data ",1),(0,a._)("ul",null,[(0,a._)("li",Z,[(0,a._)("button",{class:"page-link",onClick:e[3]||(e[3]=function(e){return t.page=1}),"data-toggle":"tooltip","data-placement":"bottom",title:"First Page"},E)]),(0,a._)("li",N,[1!==t.page?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"page-link",onClick:e[4]||(e[4]=function(e){return t.page--}),"data-toggle":"tooltip","data-placement":"bottom",title:""},$)):(0,a.kq)("",!0)]),(0,a._)("li",H,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.pages.slice(t.page-1,t.page+10),(function(e){return(0,a.wg)(),(0,a.iD)("button",{type:"button",class:(0,a.C_)(["page-link",t.page===e?"active":""]),key:e,onClick:function(n){return t.page=e}},(0,a.zw)(e),11,K)})),128))]),(0,a._)("li",G,[t.page<t.pages.length?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",onClick:e[5]||(e[5]=function(e){return t.page++}),class:"page-link"},R)):(0,a.kq)("",!0)]),(0,a._)("li",V,[(0,a._)("button",{class:"page-link",onClick:e[6]||(e[6]=function(e){return t.page=t.pages.length}),"data-toggle":"tooltip","data-placement":"bottom",title:"Last Page"},J)])])])):(0,a.kq)("",!0)])])]),Q])}]])}}]);