"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[993],{1954:(t,e,i)=>{i.d(e,{Z:()=>s});var a=i(3645),n=i.n(a)()((function(t){return t[1]}));n.push([t.id,".btn.btn-sm.btn-outline-info.btn-text{line-height:1}.member-select .member-list{z-index:999}.widget .widget-body p{color:#000}",""]);const s=n},7823:(t,e,i)=>{i.d(e,{Z:()=>m});var a=i(821);var n=(t,e)=>{const i=t.__vccOpts||t;for(const[t,a]of e)i[t]=a;return i};const s={inheritAttrs:!1,emits:["pagination-change-page"],components:{RenderlessLaravelVuePagination:{emits:["pagination-change-page"],props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},showDisabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator:t=>-1!==["small","default","large"].indexOf(t)},align:{type:String,default:"left",validator:t=>-1!==["left","center","right"].indexOf(t)}},computed:{isApiResource(){return!!this.data.meta},currentPage(){return this.isApiResource?this.data.meta.current_page:this.data.current_page},firstPageUrl(){return this.isApiResource?this.data.links.first:null},from(){return this.isApiResource?this.data.meta.from:this.data.from},lastPage(){return this.isApiResource?this.data.meta.last_page:this.data.last_page},lastPageUrl(){return this.isApiResource?this.data.links.last:null},nextPageUrl(){return this.isApiResource?this.data.links.next:this.data.next_page_url},perPage(){return this.isApiResource?this.data.meta.per_page:this.data.per_page},prevPageUrl(){return this.isApiResource?this.data.links.prev:this.data.prev_page_url},to(){return this.isApiResource?this.data.meta.to:this.data.to},total(){return this.isApiResource?this.data.meta.total:this.data.total},pageRange(){if(-1===this.limit)return 0;if(0===this.limit)return this.lastPage;for(var t,e=this.currentPage,i=this.lastPage,a=this.limit,n=e-a,s=e+a+1,l=[],r=[],o=1;o<=i;o++)(1===o||o===i||o>=n&&o<s)&&l.push(o);return l.forEach((function(e){t&&(e-t==2?r.push(t+1):e-t!=1&&r.push("...")),r.push(e),t=e})),r}},methods:{previousPage(){this.selectPage(this.currentPage-1)},nextPage(){this.selectPage(this.currentPage+1)},selectPage(t){"..."!==t&&this.$emit("pagination-change-page",t)}},render(){return this.$slots.default({data:this.data,limit:this.limit,showDisabled:this.showDisabled,size:this.size,align:this.align,computed:{isApiResource:this.isApiResource,currentPage:this.currentPage,firstPageUrl:this.firstPageUrl,from:this.from,lastPage:this.lastPage,lastPageUrl:this.lastPageUrl,nextPageUrl:this.nextPageUrl,perPage:this.perPage,prevPageUrl:this.prevPageUrl,to:this.to,total:this.total,pageRange:this.pageRange},prevButtonEvents:{click:t=>{t.preventDefault(),this.previousPage()}},nextButtonEvents:{click:t=>{t.preventDefault(),this.nextPage()}},pageButtonEvents:t=>({click:e=>{e.preventDefault(),this.selectPage(t)}})})}}},props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},showDisabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator:t=>-1!==["small","default","large"].indexOf(t)},align:{type:String,default:"left",validator:t=>-1!==["left","center","right"].indexOf(t)}},methods:{onPaginationChangePage(t){this.$emit("pagination-change-page",t)}}},l=["tabindex"],r=(0,a._)("span",{"aria-hidden":"true"},"«",-1),o=(0,a._)("span",{class:"sr-only"},"Previous",-1),c={key:0,class:"sr-only"},u=["tabindex"],p=(0,a._)("span",{"aria-hidden":"true"},"»",-1),d=(0,a._)("span",{class:"sr-only"},"Next",-1);var m=n(s,[["render",function(t,e,i,n,s,m){const g=(0,a.up)("RenderlessLaravelVuePagination");return(0,a.wg)(),(0,a.j4)(g,{data:i.data,limit:i.limit,"show-disabled":i.showDisabled,size:i.size,align:i.align,onPaginationChangePage:m.onPaginationChangePage},{default:(0,a.w5)((e=>[e.computed.total>e.computed.perPage?((0,a.wg)(),(0,a.iD)("ul",(0,a.dG)({key:0},t.$attrs,{class:["pagination",{"pagination-sm":"small"==e.size,"pagination-lg":"large"==e.size,"justify-content-center":"center"==e.align,"justify-content-end":"right"==e.align}]}),[e.computed.prevPageUrl||e.showDisabled?((0,a.wg)(),(0,a.iD)("li",{key:0,class:(0,a.C_)(["page-item pagination-prev-nav",{disabled:!e.computed.prevPageUrl}])},[(0,a._)("a",(0,a.dG)({class:"page-link",href:"#","aria-label":"Previous",tabindex:!e.computed.prevPageUrl&&-1},(0,a.mx)(e.prevButtonEvents)),[(0,a.WI)(t.$slots,"prev-nav",{},(()=>[r,o]))],16,l)],2)):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.computed.pageRange,((t,i)=>((0,a.wg)(),(0,a.iD)("li",{class:(0,a.C_)(["page-item pagination-page-nav",{active:t==e.computed.currentPage}]),key:i},[(0,a._)("a",(0,a.dG)({class:"page-link",href:"#"},(0,a.mx)(e.pageButtonEvents(t))),[(0,a.Uk)((0,a.zw)(t)+" ",1),t==e.computed.currentPage?((0,a.wg)(),(0,a.iD)("span",c,"(current)")):(0,a.kq)("",!0)],16)],2)))),128)),e.computed.nextPageUrl||e.showDisabled?((0,a.wg)(),(0,a.iD)("li",{key:1,class:(0,a.C_)(["page-item pagination-next-nav",{disabled:!e.computed.nextPageUrl}])},[(0,a._)("a",(0,a.dG)({class:"page-link",href:"#","aria-label":"Next",tabindex:!e.computed.nextPageUrl&&-1},(0,a.mx)(e.nextButtonEvents)),[(0,a.WI)(t.$slots,"next-nav",{},(()=>[p,d]))],16,u)],2)):(0,a.kq)("",!0)],16)):(0,a.kq)("",!0)])),_:3},8,["data","limit","show-disabled","size","align","onPaginationChangePage"])}]])},7993:(t,e,i)=>{i.r(e),i.d(e,{default:()=>ht});var a=i(821),n={key:0,class:"row mb-4"},s={class:"col-md-4"},l={class:"widget widget-primary animate__animated animate__fadeIn"},r=(0,a._)("div",{class:"widget-header"},[(0,a._)("h5",{class:"title"},"Total DPS"),(0,a._)("span",null,[(0,a._)("i",{class:"bx bx-group"})])],-1),o={class:"widget-body"},c={class:"col-md-4"},u={class:"widget widget-success animate__animated animate__fadeIn"},p=(0,a._)("div",{class:"widget-header"},[(0,a._)("h5",{class:"title"},"Total Collection"),(0,a._)("span",null,[(0,a._)("i",{class:"bx bx-group"})])],-1),d={class:"widget-body"},m={class:"col-md-4"},g={class:"widget widget-danger animate__animated animate__fadeIn"},h=(0,a._)("div",{class:"widget-header"},[(0,a._)("h5",{class:"title"},"Due Amount"),(0,a._)("span",null,[(0,a._)("i",{class:"bx bx-group"})])],-1),_={class:"widget-body"},f={key:1,class:"widget widget-secondary mb-4"},b=(0,a._)("div",{class:"widget-header"},[(0,a._)("h5",{class:"title"},"Filtering"),(0,a._)("span",null,[(0,a._)("i",{class:"bx bx-filter-alt"})])],-1),w={class:"widget-body"},v={class:"row"},y={class:"col-md-4"},P=(0,a._)("span",{class:"select-icon"},[(0,a._)("i",{class:"bx bx-chevron-down"})],-1),x={class:"member-list"},k={class:"member-search"},D=[(0,a._)("i",{class:"bx bx-x"},null,-1)],A={class:"members"},C=["onClick"],z={class:"col-md-3"},O={class:"col-md-3"},U={class:"col-md-2"},F=(0,a._)("button",{type:"submit",class:"btn btn-sm btn-success"},"Filter",-1),R={class:"row"},S={class:"col-md-12"},M={class:"box"},j={class:"box-header"},L=(0,a._)("div",{class:"box-title"},[(0,a._)("h4",null,"DPS application list")],-1),W={class:"box-action"},B=(0,a.Uk)("New DPS Application"),E={class:"box-body"},V={key:0,class:"pagination mb-2"},q={class:"pagination-data"},T={class:"table"},$=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"#"),(0,a._)("th",null,"Acc. No"),(0,a._)("th",null,"Member"),(0,a._)("th",null,"Photo"),(0,a._)("th",null,"Deposit"),(0,a._)("th",null,"Year"),(0,a._)("th",null,"Total Deposit"),(0,a._)("th",null,"Total Getting"),(0,a._)("th",null,"Profit"),(0,a._)("th",null,"Created at"),(0,a._)("th")])],-1),N=["src"],Y=(0,a._)("br",null,null,-1),I={class:"action"},Z=(0,a._)("i",{class:"bx bx-edit"},null,-1),G=["onClick"],H=[(0,a._)("i",{class:"bx bx-trash"},null,-1)],K={key:1},J=[(0,a._)("td",{colspan:"9"},"No application found",-1)],Q={class:"box-footer text-right"},X={key:0,class:"pagination"},tt={class:"pagination-data"},et=(0,a._)("div",{class:"col-md-4"},null,-1);var it=i(8637),at=i(4118),nt=i(7823),st=i(9755),lt=i.n(st);function rt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function ot(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(i),!0).forEach((function(e){ct(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):rt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ct(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const ut={name:"Index",components:{Pagination:nt.Z},mixins:[at.B],data:function(){return{is_filter_pagination:!1,form:{from_date:"",to_date:"",member_id:""},from_date:"",to_date:"",member_input_text:"",search_key:"",isOpen:!1,openFilter:!1}},computed:ot(ot({},(0,it.Se)({applications:"dps/applications",dps_total:"dps/statistics",members:"member/searchData"})),{},{filterApplications:function(){return this.applications},filterMembers:function(){var t=this;return this.members&&this.members.length&&this.search_key.length>1?this.members.filter((function(e){return e.account_no.toLowerCase().includes(t.search_key.toLowerCase())||e.name.toLowerCase().includes(t.search_key.toLowerCase())||e.phone.toLowerCase().includes(t.search_key.toLowerCase())})):this.members}}),methods:ot(ot({},(0,it.nv)({getApplications:"dps/getApplications",getTotalDps:"dps/getDpsStatistics",deleteApplication:"dps/deleteApplication",filterDpsApplications:"dps/filterApplications"})),{},{deleteConfirm:function(t){var e=this;this.hasPermission("delete_application")?this.$swal({title:"Really want to delete!",text:"Are you sure? You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#5430d6",confirmButtonText:"Yes, Delete it!",cancelButtonColor:"#c82333"}).then((function(i){i.isConfirmed&&e.deleteApplication(t).then((function(){e.error_message?e.error=e.error_message:e.$swal({icon:"success",title:"Congratulation!",text:"User has been deleted successfully"})}))})):this.message403()},withdrawApplication:function(){this.$swal({icon:"warning",title:"Coming Soon!",text:"Withdrawal feature is unavailable right now"})},getResults:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.is_filter_pagination){var e=this.form;e.page=t,this.filterDpsApplications(e)}else this.getApplications(t)},showMemberList:function(){this.isOpen=!this.isOpen,lt()(".member-input .form-control").focus()},closeMemberList:function(){this.isOpen=!this.isOpen},chooseMember:function(t){this.form.member_id=t.id,this.member_input_text=t.account_no+"-"+t.name,this.search_key="",this.isOpen=!this.isOpen},filterSubmit:function(){this.is_filter_pagination=!0,this.filterDpsApplications(this.form)},clearFilterForm:function(){this.is_filter_pagination=!1,this.getResults(1),this.form.member_id="",this.form.from_date="",this.form.to_date="",this.member_input_text="",this.from_date="",this.to_date=""}}),mounted:function(){this.getResults(1),this.getTotalDps()},watch:{from_date:function(){this.form.from_date=this.datePickerFormat(this.from_date)},to_date:function(){this.form.to_date=this.datePickerFormat(this.to_date)}}};var pt=i(2446),dt=i.n(pt),mt=i(1954),gt={insert:"head",singleton:!1};dt()(mt.Z,gt);mt.Z.locals;const ht=(0,i(3744).Z)(ut,[["render",function(t,e,i,it,at,nt){var st=(0,a.up)("router-link"),lt=(0,a.up)("Datepicker"),rt=(0,a.up)("Pagination");return(0,a.wg)(),(0,a.iD)(a.HY,null,[t.dps_total?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",s,[(0,a._)("div",l,[r,(0,a._)("div",o,[(0,a.Wm)(st,{to:"/members"},{default:(0,a.w5)((function(){return[(0,a._)("h3",null,(0,a.zw)(t.numberFormat(t.dps_total.total_amounts,2)),1)]})),_:1})])])]),(0,a._)("div",c,[(0,a._)("div",u,[p,(0,a._)("div",d,[(0,a.Wm)(st,{to:"/members"},{default:(0,a.w5)((function(){return[(0,a._)("h3",null,(0,a.zw)(t.numberFormat(t.dps_total.collections,2)),1)]})),_:1})])])]),(0,a._)("div",m,[(0,a._)("div",g,[h,(0,a._)("div",_,[(0,a.Wm)(st,{to:"/members"},{default:(0,a.w5)((function(){return[(0,a._)("h3",null,(0,a.zw)(t.numberFormat(t.dps_total.dues,2)),1)]})),_:1})])])])])):(0,a.kq)("",!0),at.openFilter?((0,a.wg)(),(0,a.iD)("div",f,[b,(0,a._)("div",w,[(0,a._)("form",{onSubmit:e[7]||(e[7]=(0,a.iM)((function(){return nt.filterSubmit&&nt.filterSubmit.apply(nt,arguments)}),["prevent"]))},[(0,a._)("div",v,[(0,a._)("div",y,[(0,a._)("div",{class:(0,a.C_)(["member-select",{open:at.isOpen}])},[(0,a._)("div",{class:"member-input",onClick:e[1]||(e[1]=(0,a.iM)((function(){return nt.showMemberList&&nt.showMemberList.apply(nt,arguments)}),["prevent"]))},[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=function(t){return at.member_input_text=t}),class:"form-control",placeholder:"Choose Member",readonly:""},null,512),[[a.nr,at.member_input_text]]),P]),(0,a._)("div",x,[(0,a._)("div",k,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=function(t){return at.search_key=t}),placeholder:"Search by account no, name, phone",class:"form-control"},null,512),[[a.nr,at.search_key]]),(0,a._)("span",{class:"list-close",onClick:e[3]||(e[3]=function(){return nt.closeMemberList&&nt.closeMemberList.apply(nt,arguments)})},D)]),(0,a._)("div",A,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(nt.filterMembers,(function(t,e){return(0,a.wg)(),(0,a.iD)("div",{class:"member text-left",key:t.id,onClick:(0,a.iM)((function(e){return nt.chooseMember(t)}),["prevent"])},[(0,a._)("p",null,(0,a.zw)(t.account_no)+" - "+(0,a.zw)(t.name)+" - "+(0,a.zw)(t.phone),1)],8,C)})),128))])])],2)]),(0,a._)("div",z,[(0,a.Wm)(lt,{modelValue:at.from_date,"onUpdate:modelValue":e[4]||(e[4]=function(t){return at.from_date=t}),format:"dd-MM-yyyy",enableTimePicker:!1,autoApply:"",placeholder:"Select From Date"},null,8,["modelValue"])]),(0,a._)("div",O,[(0,a.Wm)(lt,{modelValue:at.to_date,"onUpdate:modelValue":e[5]||(e[5]=function(t){return at.to_date=t}),format:"dd-MM-yyyy",enableTimePicker:!1,autoApply:"",placeholder:"Select From Date"},null,8,["modelValue"])]),(0,a._)("div",U,[F,at.is_filter_pagination?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",onClick:e[6]||(e[6]=(0,a.iM)((function(){return nt.clearFilterForm&&nt.clearFilterForm.apply(nt,arguments)}),["prevent"])),class:"btn btn-sm btn-danger ml-2"},"Clear")):(0,a.kq)("",!0)])])],32)])])):(0,a.kq)("",!0),(0,a._)("div",R,[(0,a._)("div",S,[(0,a._)("div",M,[(0,a._)("div",j,[L,(0,a._)("div",W,[(0,a._)("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:e[8]||(e[8]=function(t){return at.openFilter=!at.openFilter})},"Filter"),(0,a.Wm)(st,{to:{name:"CreateDPS"},class:"btn btn-sm btn-primary"},{default:(0,a.w5)((function(){return[B]})),_:1})])]),(0,a._)("div",E,[nt.filterApplications?((0,a.wg)(),(0,a.iD)("div",V,[(0,a._)("p",q," Page "+(0,a.zw)(nt.filterApplications.current_page)+" Showing "+(0,a.zw)(nt.filterApplications.from)+" to "+(0,a.zw)(nt.filterApplications.to)+" of "+(0,a.zw)(nt.filterApplications.total)+" Data ",1),(0,a.Wm)(rt,{data:nt.filterApplications,onPaginationChangePage:nt.getResults,limit:6},null,8,["data","onPaginationChangePage"])])):(0,a.kq)("",!0),(0,a._)("table",T,[$,(0,a._)("tbody",null,[nt.filterApplications&&nt.filterApplications.data?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(nt.filterApplications.data,(function(i,n){return(0,a.wg)(),(0,a.iD)("tr",{key:i.id},[(0,a._)("td",null,(0,a.zw)(nt.filterApplications.from+n),1),(0,a._)("td",null,(0,a.zw)(i.member.account_no),1),(0,a._)("td",null,[(0,a.Wm)(st,{to:{name:"MemberShow",params:{member_id:i.member_id}},class:"text-primary"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,a.zw)(i.member.name),1)]})),_:2},1032,["to"])]),(0,a._)("td",null,[(0,a._)("img",{src:i.member?i.member.photo:"",alt:"",class:"w-8 rounded"},null,8,N)]),(0,a._)("td",null,[(0,a.Uk)((0,a.zw)(t.numberFormat(i.dps_amount,2))+" ",1),Y,(0,a.Uk)(" ("+(0,a.zw)(t.ucFirst(i.dps_type))+")",1)]),(0,a._)("td",null,(0,a.zw)(i.year),1),(0,a._)("td",null,(0,a.zw)(t.numberFormat(i.total_amount,2)),1),(0,a._)("td",null,(0,a.zw)(t.numberFormat(i.receiving,2)),1),(0,a._)("td",null,(0,a.zw)(t.numberFormat(i.profit,2)),1),(0,a._)("td",null,(0,a.zw)(t.userFormattedDate(i.created_at)),1),(0,a._)("td",null,[(0,a._)("div",I,[(0,a._)("a",{href:"#",class:"btn btn-sm btn-outline-info btn-text",onClick:e[9]||(e[9]=(0,a.iM)((function(){return nt.withdrawApplication&&nt.withdrawApplication.apply(nt,arguments)}),["prevent"]))},"Withdraw"),(0,a.Wm)(st,{to:{name:"EditDPSApplication",params:{application_id:i.id}},class:"btn btn-outline-warning btn-sm"},{default:(0,a.w5)((function(){return[Z]})),_:2},1032,["to"]),(0,a._)("a",{href:"#",class:"btn btn-outline-danger btn-sm",onClick:(0,a.iM)((function(t){return nt.deleteConfirm(i.id)}),["prevent"])},H,8,G)])])])})),128)):((0,a.wg)(),(0,a.iD)("tr",K,J))])])]),(0,a._)("div",Q,[nt.filterApplications?((0,a.wg)(),(0,a.iD)("div",X,[(0,a._)("p",tt," Page "+(0,a.zw)(nt.filterApplications.current_page)+" Showing "+(0,a.zw)(nt.filterApplications.from)+" to "+(0,a.zw)(nt.filterApplications.to)+" of "+(0,a.zw)(nt.filterApplications.total)+" Data ",1),(0,a.Wm)(rt,{data:nt.filterApplications,onPaginationChangePage:nt.getResults,limit:6},null,8,["data","onPaginationChangePage"])])):(0,a.kq)("",!0)])])]),et])],64)}]])}}]);