"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8435],{688:(e,r,t)=>{t.d(r,{Z:()=>l});var s=t(3645),o=t.n(s)()((function(e){return e[1]}));o.push([e.id,".dp__theme_light{--dp-primary-color:#3b82f6;--dp-icon-color:#3b82f6}",""]);const l=o},8435:(e,r,t)=>{t.r(r),t.d(r,{default:()=>Te});var s=t(821),o={class:"box"},l={class:"box-header"},a=(0,s._)("div",{class:"box-title"},[(0,s._)("h5",null,"Create DPS Application")],-1),n={class:"box-action"},i=(0,s.Uk)("DPS application list"),c={class:"box-body"},p={class:"row"},d={class:"col-md-8 offset-md-2"},m={class:"form-group"},u={class:"row"},_=(0,s._)("div",{class:"col-md-4 text-left"},[(0,s._)("label",{class:"col-form-label"},"Member")],-1),f={class:"col-md-8"},y=(0,s._)("span",{class:"select-icon"},[(0,s._)("i",{class:"bx bx-chevron-down"})],-1),b={class:"member-list"},h={class:"member-search"},v=[(0,s._)("i",{class:"bx bx-x"},null,-1)],w={class:"members"},g=["onClick"],k={key:0,class:"text-danger text-sm"},x={class:"form-group"},C={class:"row"},D=(0,s._)("div",{class:"col-md-4 text-left"},[(0,s._)("label",{class:"col-form-label"},"Deposit Amount")],-1),O={class:"col-md-8"},M={key:0,class:"text-danger text-sm"},P={class:"form-group"},A={class:"row"},V=(0,s._)("div",{class:"col-md-4 text-left"},[(0,s._)("label",{class:"col-form-label"},"Year")],-1),j={class:"col-md-8"},L={key:0,class:"text-danger text-sm"},U={class:"form-group"},z={class:"row"},S=(0,s._)("div",{class:"col-md-4 text-left"},[(0,s._)("label",{class:"col-form-label"},"Total Deposit")],-1),T={class:"col-md-8"},q={class:"form-group"},K={class:"row"},E=(0,s._)("div",{class:"col-md-4 text-left"},[(0,s._)("label",{class:"col-form-label"},"Total Receive/Getting")],-1),Z={class:"col-md-8"},$={key:0,class:"text-danger text-sm"},F={class:"form-group"},G={class:"row"},W=(0,s._)("div",{class:"col-md-4 text-left"},[(0,s._)("label",{class:"col-form-label"},"Profit")],-1),Y={class:"col-md-8"},H={class:"form-group"},R={class:"row"},B=(0,s._)("div",{class:"col-md-4 text-left"},[(0,s._)("label",{class:"col-form-label"},"Application Type")],-1),I={class:"col-md-8"},J={class:"mt-2"},N={class:"mr-4"},Q=(0,s._)("span",{class:"ml-1"},"Weekly",-1),X=(0,s._)("span",{class:"ml-1"},"Monthly",-1),ee={key:0,class:"text-danger text-sm"},re={class:"form-group"},te={class:"row"},se=(0,s._)("div",{class:"col-md-4 text-left"},[(0,s._)("label",{class:"col-form-label"},"Start From")],-1),oe={class:"col-md-8"},le={class:"row"},ae={class:"col-md-6"},ne=(0,s._)("option",{value:""},"Select Day",-1),ie=["value"],ce={key:0,class:"text-danger text-sm"},pe={class:"col-md-6"},de={key:0,class:"text-danger text-sm"},me={class:"form-group mt-4 bg-yellow-50 p-2"},ue={class:"row"},_e=(0,s._)("div",{class:"col-md-4 text-left"},[(0,s._)("label",{class:"col-form-label"},"Previous Calculation")],-1),fe={class:"col-md-8"},ye={class:"row"},be={class:"col-md-12"},he={class:"col-md-12 mt-2"},ve={class:"form-floating mb-3"},we=(0,s._)("label",{for:"remarks"},"Comments",-1),ge={class:"mt-8 text-right"},ke={type:"submit",class:"btn btn-primary",id:"storeApplication"},xe=(0,s._)("div",{class:"spinner-border",role:"status"},[(0,s._)("span",{class:"visually-hidden"},"Loading...")],-1),Ce=(0,s._)("div",{class:"box-footer"},null,-1);var De=t(8637),Oe=t(9755),Me=t.n(Oe);function Pe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function Ae(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Pe(Object(t),!0).forEach((function(r){Ve(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pe(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function Ve(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const je={name:"Create",mixins:[t(4118).B],data:function(){return{form:{member_id:"",dps_amount:"",total_dps:"",year:3,receiving:"",profit:"",dps_type:"weekly",w_day:"",m_date:"",prev_deposit:"",remarks:""},monthly_date:"",member_input_text:"",search_key:"",errors:null,error:null,isOpen:!1}},computed:Ae(Ae({},(0,De.Se)({validation_errors:"validation_errors",error_message:"error_message",members:"member/searchData",application_types:"group/application_types",days:"group/days"})),{},{filterRoles:function(){return this.roles},filterMembers:function(){var e=this;return this.members&&this.members.length&&this.search_key.length>1?this.members.filter((function(r){return r.account_no.toLowerCase().includes(e.search_key.toLowerCase())||r.name.toLowerCase().includes(e.search_key.toLowerCase())||r.phone.toLowerCase().includes(e.search_key.toLowerCase())})):this.members}}),methods:Ae(Ae({},(0,De.nv)({getMembers:"member/getSearchData",createApplication:"dps/createApplication"})),{},{showMemberList:function(){this.isOpen=!this.isOpen,Me()(".member-input .form-control").focus()},closeMemberList:function(){this.isOpen=!this.isOpen},chooseMember:function(e){this.form.member_id=e.id,this.member_input_text=e.account_no+"-"+e.name+"-"+e.phone+" ("+e.member_type+")","deposit_weekly"===e.member_type||"loan"===e.member_type?(this.form.w_day=e.day,this.form.dps_type="weekly",Me()(".dp__disabled").prop("disabled",!0),Me()("#w_day").prop("disabled",!1),this.form.m_date=""):"deposit_monthly"===e.member_type&&(Me()("#w_day").prop("disabled",!0),Me()(".dp__disabled").prop("disabled",!1),this.form.dps_type="monthly",this.form.w_day=""),this.search_key="",this.isOpen=!this.isOpen,this.dpsCalculation()},dpsType:function(){"weekly"===this.form.dps_type?(Me()(".dp__disabled").prop("disabled",!0),Me()("#w_day").prop("disabled",!1),this.form.m_date=""):(Me()("#w_day").prop("disabled",!0),Me()(".dp__disabled").prop("disabled",!1),this.form.w_day=""),this.dpsCalculation()},dpsCalculation:function(){var e=0;e="weekly"===this.form.dps_type?52*this.form.year:12*this.form.year,this.form.total_dps=e*this.form.dps_amount,this.form.profit=this.form.receiving-this.form.total_dps},prevCalculation:function(){this.form.due=this.form.total_dps-this.form.prev_deposit},storeDpsApplication:function(){var e=this;Me()("#storeApplication").prop("disabled",!0).addClass("submitted");var r=new FormData,t=this.form;Object.keys(t).forEach((function(e){r.append(e,t[e])})),this.createApplication(r).then((function(){e.validation_errors||e.error_message?(e.errors=e.validation_errors,e.error=e.error_message):(e.errors=e.error=null,Object.assign(e.$data,e.$options.data.apply(e)),e.$swal({icon:"success",title:"Success!",text:"Dps Application has been saved successfully",timer:3e3})),Me()("#storeApplication").prop("disabled",!1).removeClass("submitted")}))}}),mounted:function(){this.members||this.getMembers()},watch:{monthly_date:function(){this.form.m_date=this.datePickerFormat(this.monthly_date)}}};var Le=t(2446),Ue=t.n(Le),ze=t(688),Se={insert:"head",singleton:!1};Ue()(ze.Z,Se);ze.Z.locals;const Te=(0,t(3744).Z)(je,[["render",function(e,r,t,De,Oe,Me){var Pe=(0,s.up)("router-link"),Ae=(0,s.up)("Datepicker");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",l,[a,(0,s._)("div",n,[(0,s.Wm)(Pe,{to:{name:"ApplicationDPS"},class:"btn btn-primary btn-sm"},{default:(0,s.w5)((function(){return[i]})),_:1})])]),(0,s._)("div",c,[(0,s._)("form",{onSubmit:r[20]||(r[20]=(0,s.iM)((function(){return Me.storeDpsApplication&&Me.storeDpsApplication.apply(Me,arguments)}),["prevent"]))},[(0,s._)("div",p,[(0,s._)("div",d,[(0,s._)("div",m,[(0,s._)("div",u,[_,(0,s._)("div",f,[(0,s._)("div",{class:(0,s.C_)(["member-select",{open:Oe.isOpen}])},[(0,s._)("div",{class:"member-input",onClick:r[1]||(r[1]=(0,s.iM)((function(){return Me.showMemberList&&Me.showMemberList.apply(Me,arguments)}),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=function(e){return Oe.member_input_text=e}),class:"form-control",placeholder:"Choose Member",readonly:""},null,512),[[s.nr,Oe.member_input_text]]),y]),(0,s._)("div",b,[(0,s._)("div",h,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":r[2]||(r[2]=function(e){return Oe.search_key=e}),placeholder:"Search by account no, name, phone",class:"form-control"},null,512),[[s.nr,Oe.search_key]]),(0,s._)("span",{class:"list-close",onClick:r[3]||(r[3]=function(){return Me.closeMemberList&&Me.closeMemberList.apply(Me,arguments)})},v)]),(0,s._)("div",w,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Me.filterMembers,(function(e,r){return(0,s.wg)(),(0,s.iD)("div",{class:"member",key:e.id,onClick:(0,s.iM)((function(r){return Me.chooseMember(e)}),["prevent"])},[(0,s._)("p",null,(0,s.zw)(e.account_no)+" - "+(0,s.zw)(e.name)+" - "+(0,s.zw)(e.phone)+" ("+(0,s.zw)(e.member_type)+")",1)],8,g)})),128))])])],2),Oe.errors?((0,s.wg)(),(0,s.iD)("span",k,(0,s.zw)(Oe.errors.member_id?Oe.errors.member_id[0]:""),1)):(0,s.kq)("",!0)])])]),(0,s._)("div",x,[(0,s._)("div",C,[D,(0,s._)("div",O,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":r[4]||(r[4]=function(e){return Oe.form.dps_amount=e}),placeholder:"Enter deposit amount",class:"form-control",onKeyup:r[5]||(r[5]=function(){return Me.dpsCalculation&&Me.dpsCalculation.apply(Me,arguments)})},null,544),[[s.nr,Oe.form.dps_amount]]),Oe.errors?((0,s.wg)(),(0,s.iD)("span",M,(0,s.zw)(Oe.errors.dps_amount?Oe.errors.dps_amount[0]:""),1)):(0,s.kq)("",!0)])])]),(0,s._)("div",P,[(0,s._)("div",A,[V,(0,s._)("div",j,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":r[6]||(r[6]=function(e){return Oe.form.year=e}),placeholder:"0",class:"form-control",onKeyup:r[7]||(r[7]=function(){return Me.dpsCalculation&&Me.dpsCalculation.apply(Me,arguments)})},null,544),[[s.nr,Oe.form.year]]),Oe.errors?((0,s.wg)(),(0,s.iD)("span",L,(0,s.zw)(Oe.errors.year?Oe.errors.year[0]:""),1)):(0,s.kq)("",!0)])])]),(0,s._)("div",U,[(0,s._)("div",z,[S,(0,s._)("div",T,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":r[8]||(r[8]=function(e){return Oe.form.total_dps=e}),placeholder:"0",class:"form-control",readonly:""},null,512),[[s.nr,Oe.form.total_dps]])])])]),(0,s._)("div",q,[(0,s._)("div",K,[E,(0,s._)("div",Z,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":r[9]||(r[9]=function(e){return Oe.form.receiving=e}),placeholder:"0",class:"form-control",onKeyup:r[10]||(r[10]=function(){return Me.dpsCalculation&&Me.dpsCalculation.apply(Me,arguments)})},null,544),[[s.nr,Oe.form.receiving]]),Oe.errors?((0,s.wg)(),(0,s.iD)("span",$,(0,s.zw)(Oe.errors.receiving?Oe.errors.receiving[0]:""),1)):(0,s.kq)("",!0)])])]),(0,s._)("div",F,[(0,s._)("div",G,[W,(0,s._)("div",Y,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":r[11]||(r[11]=function(e){return Oe.form.profit=e}),placeholder:"0",class:"form-control",readonly:""},null,512),[[s.nr,Oe.form.profit]])])])]),(0,s._)("div",H,[(0,s._)("div",R,[B,(0,s._)("div",I,[(0,s._)("div",J,[(0,s._)("label",N,[(0,s.wy)((0,s._)("input",{type:"radio",name:"application_type",value:"weekly","onUpdate:modelValue":r[12]||(r[12]=function(e){return Oe.form.dps_type=e}),onChange:r[13]||(r[13]=function(){return Me.dpsType&&Me.dpsType.apply(Me,arguments)})},null,544),[[s.G2,Oe.form.dps_type]]),Q]),(0,s._)("label",null,[(0,s.wy)((0,s._)("input",{type:"radio",name:"application_type",value:"monthly","onUpdate:modelValue":r[14]||(r[14]=function(e){return Oe.form.dps_type=e}),onChange:r[15]||(r[15]=function(){return Me.dpsType&&Me.dpsType.apply(Me,arguments)})},null,544),[[s.G2,Oe.form.dps_type]]),X])]),Oe.errors?((0,s.wg)(),(0,s.iD)("span",ee,(0,s.zw)(Oe.errors.dps_type?Oe.errors.dps_type[0]:""),1)):(0,s.kq)("",!0)])])]),(0,s._)("div",re,[(0,s._)("div",te,[se,(0,s._)("div",oe,[(0,s._)("div",le,[(0,s._)("div",ae,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":r[16]||(r[16]=function(e){return Oe.form.w_day=e}),class:"form-control",id:"w_day"},[ne,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.days,(function(e,r){return(0,s.wg)(),(0,s.iD)("option",{value:e.code},(0,s.zw)(e.name),9,ie)})),256))],512),[[s.bM,Oe.form.w_day]]),Oe.errors?((0,s.wg)(),(0,s.iD)("span",ce,(0,s.zw)(Oe.errors.w_day?Oe.errors.w_day[0]:""),1)):(0,s.kq)("",!0)]),(0,s._)("div",pe,[(0,s.Wm)(Ae,{modelValue:Oe.monthly_date,"onUpdate:modelValue":r[17]||(r[17]=function(e){return Oe.monthly_date=e}),format:"dd-MM-yyyy",enableTimePicker:!1,autoApply:"",placeholder:"Select Date",id:"m_date"},null,8,["modelValue"]),Oe.errors?((0,s.wg)(),(0,s.iD)("span",de,(0,s.zw)(Oe.errors.m_date?Oe.errors.m_date[0]:""),1)):(0,s.kq)("",!0)])])])])]),(0,s._)("div",me,[(0,s._)("div",ue,[_e,(0,s._)("div",fe,[(0,s._)("div",ye,[(0,s._)("div",be,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":r[18]||(r[18]=function(e){return Oe.form.prev_deposit=e}),class:"form-control",placeholder:"Previous Deposit"},null,512),[[s.nr,Oe.form.prev_deposit]])]),(0,s._)("div",he,[(0,s._)("div",ve,[(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":r[19]||(r[19]=function(e){return Oe.form.remarks=e}),class:"form-control",id:"remarks",placeholder:"Leave a comments here"},null,512),[[s.nr,Oe.form.remarks]]),we])])])])])]),(0,s._)("div",ge,[(0,s._)("button",ke,[(0,s._)("span",null,(0,s.zw)(e.$t("save")),1),xe])])])])],32)]),Ce])}]])}}]);