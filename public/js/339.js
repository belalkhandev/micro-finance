"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[339],{4611:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Pe});var r=o(821),l={class:"box"},s={class:"box-header"},a=(0,r._)("div",{class:"box-title"},[(0,r._)("h5",null,"Create Loan Application")],-1),n={class:"box-action"},i=(0,r.Uk)("Loan application list"),c={class:"box-body"},m={class:"row"},p={class:"col-md-8 offset-md-2"},d={class:"form-group"},u={class:"row"},_=(0,r._)("div",{class:"col-md-4 text-left"},[(0,r._)("label",{class:"col-form-label"},"Member")],-1),f={class:"col-md-8"},y=(0,r._)("span",{class:"select-icon"},[(0,r._)("i",{class:"bx bx-chevron-down"})],-1),b={class:"member-list"},h={class:"member-search"},v=[(0,r._)("i",{class:"bx bx-x"},null,-1)],w={class:"members"},g=["onClick"],k={key:0,class:"text-danger text-sm"},x={class:"form-group"},C={class:"row"},O=(0,r._)("div",{class:"col-md-4 text-left"},[(0,r._)("label",{class:"col-form-label"},"Loan Amount")],-1),D={class:"col-md-8"},M={key:0,class:"text-danger text-sm"},L={class:"form-group"},A={class:"row"},V=(0,r._)("div",{class:"col-md-4 text-left"},[(0,r._)("label",{class:"col-form-label"},"Service (in (%) Percentage)")],-1),j={class:"col-md-8"},P={key:0,class:"text-danger text-sm"},U={class:"form-group"},z={class:"row"},S=(0,r._)("div",{class:"col-md-4 text-left"},[(0,r._)("label",{class:"col-form-label"},"Total Amount")],-1),T={class:"col-md-8"},q={class:"form-group"},K={class:"row"},E=(0,r._)("div",{class:"col-md-4 text-left"},[(0,r._)("label",{class:"col-form-label"},"Installment")],-1),F={class:"col-md-8"},$={key:0,class:"text-danger text-sm"},W={class:"form-group"},G={class:"row"},H=(0,r._)("div",{class:"col-md-4 text-left"},[(0,r._)("label",{class:"col-form-label"},"Installment Amount")],-1),I={class:"col-md-8"},Y={class:"form-group"},B={class:"row"},R=(0,r._)("div",{class:"col-md-4 text-left"},[(0,r._)("label",{class:"col-form-label"},"Application Type")],-1),Z={class:"col-md-8"},J={class:"mt-2"},N={class:"mr-4"},Q=(0,r._)("span",{class:"ml-1"},"Weekly",-1),X=(0,r._)("span",{class:"ml-1"},"Monthly",-1),ee={key:0,class:"text-danger text-sm"},te={class:"form-group"},oe={class:"row"},re=(0,r._)("div",{class:"col-md-4 text-left"},[(0,r._)("label",{class:"col-form-label"},"Start From")],-1),le={class:"col-md-8"},se={class:"row"},ae={class:"col-md-6"},ne=(0,r._)("option",{value:""},"Select Day",-1),ie=["value"],ce={key:0,class:"text-danger text-sm"},me={class:"col-md-6"},pe={key:0,class:"text-danger text-sm"},de={class:"form-group mt-4 bg-yellow-50 p-2"},ue={class:"row"},_e=(0,r._)("div",{class:"col-md-4 text-left"},[(0,r._)("label",{class:"col-form-label"},"Previous Calculation")],-1),fe={class:"col-md-8"},ye={class:"row"},be={class:"col-md-12"},he={class:"col-md-12 mt-2"},ve={class:"form-floating mb-3"},we=(0,r._)("label",{for:"remarks"},"Comments",-1),ge={class:"mt-8 text-right"},ke={type:"submit",class:"btn btn-primary",id:"storeApplication"},xe=(0,r._)("div",{class:"spinner-border",role:"status"},[(0,r._)("span",{class:"visually-hidden"},"Loading...")],-1),Ce=(0,r._)("div",{class:"box-footer"},null,-1);var Oe=o(8637),De=o(9755),Me=o.n(De);function Le(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Ae(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(o),!0).forEach((function(t){Ve(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Le(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Ve(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const je={name:"LoanCreate",mixins:[o(4118).B],data:function(){return{form:{member_id:"",loan_amount:"",service:15,service_amount:0,total_loan:0,total_installment:1,installment_amount:0,dps_type:"weekly",w_day:"",m_date:"",prev_deposit:"",remarks:""},monthly_date:"",member_input_text:"",search_key:"",errors:null,error:null,isOpen:!1}},computed:Ae(Ae({},(0,Oe.Se)({validation_errors:"validation_errors",error_message:"error_message",members:"member/searchData",application_types:"group/application_types",days:"group/days"})),{},{filterRoles:function(){return this.roles},filterMembers:function(){var e=this;return this.members&&this.members.length&&this.search_key.length>1?this.members.filter((function(t){return t.account_no.toLowerCase().includes(e.search_key.toLowerCase())||t.name.toLowerCase().includes(e.search_key.toLowerCase())||t.phone.toLowerCase().includes(e.search_key.toLowerCase())})):this.members}}),methods:Ae(Ae({},(0,Oe.nv)({getMembers:"member/getSearchData",createApplication:"loan/createApplication"})),{},{showMemberList:function(){this.isOpen=!this.isOpen,Me()(".member-input .form-control").focus()},closeMemberList:function(){this.isOpen=!this.isOpen},chooseMember:function(e){this.form.member_id=e.id,this.member_input_text=e.account_no+"-"+e.name+"-"+e.phone+" ("+e.member_type+")","deposit_weekly"===e.member_type||"loan"===e.member_type?(this.form.w_day=e.day,this.form.dps_type="weekly",Me()("#m_date").prop("disabled",!0),Me()("#w_day").prop("disabled",!1),this.form.m_date=""):"deposit_monthly"===e.member_type&&(Me()("#w_day").prop("disabled",!0),Me()("#m_date").prop("disabled",!1),this.form.dps_type="monthly",this.form.w_day=""),this.search_key="",this.isOpen=!this.isOpen},dpsType:function(){"weekly"===this.form.dps_type?(Me()("#m_date").prop("disabled",!0),Me()("#w_day").prop("disabled",!1)):(Me()("#w_day").prop("disabled",!0),Me()("#m_date").prop("disabled",!1)),this.loanCalculation()},loanCalculation:function(){var e=this.form.loan_amount?this.form.loan_amount:0,t=this.form.service?this.form.service:0,o=this.form.total_installment?this.form.total_installment:0,r=e*(t/100);this.form.service_amount=r,this.form.total_loan=Math.round(parseFloat(e)+r),this.form.installment_amount=Math.round(this.form.total_loan/o)},storeDpsApplication:function(){var e=this;Me()("#storeApplication").prop("disabled",!0).addClass("submitted");var t=new FormData,o=this.form;Object.keys(o).forEach((function(e){t.append(e,o[e])})),this.createApplication(t).then((function(){e.validation_errors||e.error_message?(e.errors=e.validation_errors,e.error=e.error_message):(e.errors=e.error=null,Object.assign(e.$data,e.$options.data.apply(e)),e.$swal({icon:"success",title:"Success!",text:"Loan Application has been saved successfully",timer:3e3})),Me()("#storeApplication").prop("disabled",!1).removeClass("submitted")}))}}),mounted:function(){this.members||this.getMembers()},watch:{monthly_date:function(){this.form.m_date=this.datePickerFormat(this.monthly_date)}}};const Pe=(0,o(3744).Z)(je,[["render",function(e,t,o,Oe,De,Me){var Le=(0,r.up)("router-link"),Ae=(0,r.up)("Datepicker");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",s,[a,(0,r._)("div",n,[(0,r.Wm)(Le,{to:{name:"ApplicationLoan"},class:"btn btn-primary btn-sm"},{default:(0,r.w5)((function(){return[i]})),_:1})])]),(0,r._)("div",c,[(0,r._)("form",{onSubmit:t[20]||(t[20]=(0,r.iM)((function(){return Me.storeDpsApplication&&Me.storeDpsApplication.apply(Me,arguments)}),["prevent"]))},[(0,r._)("div",m,[(0,r._)("div",p,[(0,r._)("div",d,[(0,r._)("div",u,[_,(0,r._)("div",f,[(0,r._)("div",{class:(0,r.C_)(["member-select",{open:De.isOpen}])},[(0,r._)("div",{class:"member-input",onClick:t[1]||(t[1]=(0,r.iM)((function(){return Me.showMemberList&&Me.showMemberList.apply(Me,arguments)}),["prevent"]))},[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return De.member_input_text=e}),class:"form-control",placeholder:"Choose Member",readonly:""},null,512),[[r.nr,De.member_input_text]]),y]),(0,r._)("div",b,[(0,r._)("div",h,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(e){return De.search_key=e}),placeholder:"Search by account no, name, phone",class:"form-control"},null,512),[[r.nr,De.search_key]]),(0,r._)("span",{class:"list-close",onClick:t[3]||(t[3]=function(){return Me.closeMemberList&&Me.closeMemberList.apply(Me,arguments)})},v)]),(0,r._)("div",w,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Me.filterMembers,(function(e,t){return(0,r.wg)(),(0,r.iD)("div",{class:"member",key:e.id,onClick:(0,r.iM)((function(t){return Me.chooseMember(e)}),["prevent"])},[(0,r._)("p",null,(0,r.zw)(e.account_no)+" - "+(0,r.zw)(e.name)+" - "+(0,r.zw)(e.phone)+" ("+(0,r.zw)(e.member_type)+")",1)],8,g)})),128))])])],2),De.errors?((0,r.wg)(),(0,r.iD)("span",k,(0,r.zw)(De.errors.member_id?De.errors.member_id[0]:""),1)):(0,r.kq)("",!0)])])]),(0,r._)("div",x,[(0,r._)("div",C,[O,(0,r._)("div",D,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=function(e){return De.form.loan_amount=e}),placeholder:"Enter loan amount",class:"form-control",onKeyup:t[5]||(t[5]=function(){return Me.loanCalculation&&Me.loanCalculation.apply(Me,arguments)})},null,544),[[r.nr,De.form.loan_amount]]),De.errors?((0,r.wg)(),(0,r.iD)("span",M,(0,r.zw)(De.errors.loan_amount?De.errors.loan_amount[0]:""),1)):(0,r.kq)("",!0)])])]),(0,r._)("div",L,[(0,r._)("div",A,[V,(0,r._)("div",j,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=function(e){return De.form.service=e}),placeholder:"0",class:"form-control",onKeyup:t[7]||(t[7]=function(){return Me.loanCalculation&&Me.loanCalculation.apply(Me,arguments)})},null,544),[[r.nr,De.form.service]]),De.errors?((0,r.wg)(),(0,r.iD)("span",P,(0,r.zw)(De.errors.service?De.errors.service[0]:""),1)):(0,r.kq)("",!0)])])]),(0,r._)("div",U,[(0,r._)("div",z,[S,(0,r._)("div",T,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=function(e){return De.form.total_loan=e}),placeholder:"0",class:"form-control",readonly:""},null,512),[[r.nr,De.form.total_loan]])])])]),(0,r._)("div",q,[(0,r._)("div",K,[E,(0,r._)("div",F,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=function(e){return De.form.total_installment=e}),placeholder:"0",class:"form-control",onKeyup:t[10]||(t[10]=function(){return Me.loanCalculation&&Me.loanCalculation.apply(Me,arguments)})},null,544),[[r.nr,De.form.total_installment]]),De.errors?((0,r.wg)(),(0,r.iD)("span",$,(0,r.zw)(De.errors.total_installment?De.errors.total_installment[0]:""),1)):(0,r.kq)("",!0)])])]),(0,r._)("div",W,[(0,r._)("div",G,[H,(0,r._)("div",I,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=function(e){return De.form.installment_amount=e}),placeholder:"0",class:"form-control",readonly:""},null,512),[[r.nr,De.form.installment_amount]])])])]),(0,r._)("div",Y,[(0,r._)("div",B,[R,(0,r._)("div",Z,[(0,r._)("div",J,[(0,r._)("label",N,[(0,r.wy)((0,r._)("input",{type:"radio",name:"application_type",value:"weekly","onUpdate:modelValue":t[12]||(t[12]=function(e){return De.form.dps_type=e}),onChange:t[13]||(t[13]=function(){return Me.dpsType&&Me.dpsType.apply(Me,arguments)})},null,544),[[r.G2,De.form.dps_type]]),Q]),(0,r._)("label",null,[(0,r.wy)((0,r._)("input",{type:"radio",name:"application_type",value:"monthly","onUpdate:modelValue":t[14]||(t[14]=function(e){return De.form.dps_type=e}),onChange:t[15]||(t[15]=function(){return Me.dpsType&&Me.dpsType.apply(Me,arguments)})},null,544),[[r.G2,De.form.dps_type]]),X])]),De.errors?((0,r.wg)(),(0,r.iD)("span",ee,(0,r.zw)(De.errors.dps_type?De.errors.dps_type[0]:""),1)):(0,r.kq)("",!0)])])]),(0,r._)("div",te,[(0,r._)("div",oe,[re,(0,r._)("div",le,[(0,r._)("div",se,[(0,r._)("div",ae,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":t[16]||(t[16]=function(e){return De.form.w_day=e}),class:"form-control",id:"w_day"},[ne,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.days,(function(e,t){return(0,r.wg)(),(0,r.iD)("option",{value:e.code},(0,r.zw)(e.name),9,ie)})),256))],512),[[r.bM,De.form.w_day]]),De.errors?((0,r.wg)(),(0,r.iD)("span",ce,(0,r.zw)(De.errors.w_day?De.errors.w_day[0]:""),1)):(0,r.kq)("",!0)]),(0,r._)("div",me,[(0,r.Wm)(Ae,{modelValue:De.monthly_date,"onUpdate:modelValue":t[17]||(t[17]=function(e){return De.monthly_date=e}),format:"dd-MM-yyyy",enableTimePicker:!1,autoApply:"",placeholder:"Select Date",id:"m_date"},null,8,["modelValue"]),De.errors?((0,r.wg)(),(0,r.iD)("span",pe,(0,r.zw)(De.errors.m_date?De.errors.m_date[0]:""),1)):(0,r.kq)("",!0)])])])])]),(0,r._)("div",de,[(0,r._)("div",ue,[_e,(0,r._)("div",fe,[(0,r._)("div",ye,[(0,r._)("div",be,[(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=function(e){return De.form.prev_deposit=e}),class:"form-control",placeholder:"Previous Deposit"},null,512),[[r.nr,De.form.prev_deposit]])]),(0,r._)("div",he,[(0,r._)("div",ve,[(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":t[19]||(t[19]=function(e){return De.form.remarks=e}),class:"form-control",id:"remarks",placeholder:"Leave a comments here"},null,512),[[r.nr,De.form.remarks]]),we])])])])])]),(0,r._)("div",ge,[(0,r._)("button",ke,[(0,r._)("span",null,(0,r.zw)(e.$t("save")),1),xe])])])])],32)]),Ce])}]])}}]);