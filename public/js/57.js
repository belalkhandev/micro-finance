"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[57],{3057:(a,e,t)=>{t.r(e),t.d(e,{default:()=>oe});var o=t(821),l={key:0,class:"row"},n={class:"col-md-8"},r={class:"box"},s={class:"box-header"},i=(0,o._)("div",{class:"box-title"},[(0,o._)("h5",null,"Loan Application Close")],-1),c={class:"box-action"},m=(0,o.Uk)("Back"),p={class:"box-body"},u={class:"form-group"},d={class:"row"},_=(0,o._)("div",{class:"col-md-5 text-left"},[(0,o._)("label",{class:"col-form-label"},"Loan amount")],-1),b={class:"col-md-7"},f={key:0,class:"text-danger text-sm"},y={class:"form-group"},v={class:"row"},g={class:"col-md-5 text-left"},h={class:"col-form-label"},w={class:"col-md-7"},x={key:0,class:"text-danger text-sm"},k={class:"form-group"},D={class:"row"},q=(0,o._)("div",{class:"col-md-5 text-left"},[(0,o._)("label",{class:"col-form-label"},"Payable loan amount")],-1),z={class:"col-md-7"},S={key:0,class:"text-danger text-sm"},L={class:"form-group"},O={class:"row"},P=(0,o._)("div",{class:"col-md-5 text-left"},[(0,o._)("label",{class:"col-form-label"},"Early payment discount")],-1),A={class:"col-md-7"},U={key:0,class:"text-danger text-sm"},j={class:"form-group"},V={class:"row"},B=(0,o._)("div",{class:"col-md-5 text-left"},[(0,o._)("label",{class:"col-form-label"},"Beginning Balance")],-1),C={class:"col-md-7"},F={key:0,class:"text-danger text-sm"},M={class:"form-group"},E={class:"row"},I=(0,o._)("div",{class:"col-md-5 text-left"},[(0,o._)("label",{class:"col-form-label"},"Payable amount")],-1),T={class:"col-md-7"},$={key:0,class:"text-danger text-sm"},N={class:"form-group"},W={class:"row"},H=(0,o._)("div",{class:"col-md-5 text-left"},[(0,o._)("label",{class:"col-form-label"},"Payment")],-1),K={class:"col-md-7"},Z={key:0,class:"text-danger text-sm"},G={class:"form-group"},J={class:"row"},Q=(0,o._)("div",{class:"col-md-5 text-left"},[(0,o._)("label",{class:"col-form-label"},"Payment method")],-1),R={class:"col-md-7"},X={class:"select-wrap"},Y=[(0,o._)("option",{value:""},"Select",-1),(0,o._)("option",{value:"cash"},"Cash",-1),(0,o._)("option",{value:"mobile_banking"},"Mobile banking",-1),(0,o._)("option",{value:"bank"},"Bank",-1)],aa={key:0,class:"text-danger text-sm"},ea={class:"form-group"},ta={class:"row"},oa=(0,o._)("div",{class:"col-md-5 text-left"},[(0,o._)("label",{class:"col-form-label"},"Payment channel")],-1),la={class:"col-md-7"},na={key:0,class:"text-danger text-sm"},ra={key:0,class:"form-group"},sa={class:"row"},ia=(0,o._)("div",{class:"col-md-5 text-left"},[(0,o._)("label",{class:"col-form-label"},"Transaction No")],-1),ca={class:"col-md-7"},ma={key:0,class:"text-danger text-sm"},pa={key:1,class:"form-group"},ua={class:"row"},da=(0,o._)("div",{class:"col-md-5 text-left"},[(0,o._)("label",{class:"col-form-label"},"Cheque No")],-1),_a={class:"col-md-7"},ba={key:0,class:"text-danger text-sm"},fa={class:"form-group"},ya={class:"row"},va=(0,o._)("div",{class:"col-md-5 text-left"},[(0,o._)("label",{class:"col-form-label"},"Note")],-1),ga={class:"col-md-7"},ha={key:0,class:"text-danger text-sm"},wa=(0,o._)("div",{class:"text-right"},[(0,o._)("button",{type:"submit",class:"btn btn-primary",id:"closeApplication"},[(0,o._)("span",null,"Submit"),(0,o._)("div",{class:"spinner-border",role:"status"},[(0,o._)("span",{class:"visually-hidden"},"Loading...")])])],-1),xa={class:"col-md-4"},ka={class:"box"},Da=(0,o._)("div",{class:"box-header"},[(0,o._)("div",{class:"box-title"},[(0,o._)("h5",null,"DPS Information")])],-1),qa={class:"box-body"},za={key:0,class:"dps-application-member mb-4"},Sa=["src"],La={class:"application-info"},Oa={class:"table table-borderless table-striped"},Pa=(0,o._)("td",null,"Loan Status",-1),Aa=["innerHTML"],Ua=(0,o._)("td",null,"Loan",-1),ja={class:"text-right"},Va=(0,o._)("td",null,"Loan Service",-1),Ba={class:"text-right"},Ca=(0,o._)("td",null,"Service in amount",-1),Fa={class:"text-right"},Ma=(0,o._)("td",null,"Loan + Service",-1),Ea={class:"text-right"},Ia=(0,o._)("td",null,"Installment",-1),Ta={class:"text-right"},$a={class:"text-right"},Na={key:0},Wa=(0,o._)("td",null,"Previous repayment",-1),Ha={class:"text-right"},Ka=(0,o._)("td",null,"Total transactions",-1),Za={class:"text-right"},Ga=(0,o._)("td",null,"Total repayment",-1),Ja={class:"text-right"};var Qa=t(8637),Ra=t(9755),Xa=t.n(Ra);function Ya(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.push.apply(t,o)}return t}function ae(a){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Ya(Object(t),!0).forEach((function(e){ee(a,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Ya(Object(t)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(t,e))}))}return a}function ee(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}const te={name:"ShowDpsApplication",data:function(){return{application_id:this.$route.params.application_id,isLoading:!1,errors:null,error:null,form:{application_id:this.$route.params.application_id,loan_amount:0,service:0,service_amount:0,payable_loan_amount:0,early_payment_discount:null,beginning_balance:0,payable_amount:null,payment:null,payment_method:"cash",payment_channel:null,transaction_no:null,cheque_no:null,note:null}}},computed:ae(ae({},(0,Qa.Se)({getApplication:"loan/application",validation_errors:"validation_errors",error_message:"error_message"})),{},{application:function(){var a=this.getApplication;return a&&this.form.application_id&&(this.form.loan_amount=a.loan_amount,this.form.payable_loan_amount=a.total_amount,this.form.service=a.service,this.form.service_amount=a.service_amount,this.form.beginning_balance=a.balance,this.form.payable_amount=a.total_amount-a.balance-this.form.early_payment_discount),a}}),methods:ae(ae({},(0,Qa.nv)({getApplicationById:"loan/getApplicationById",closeDpsApplication:"loan/closeApplication"})),{},{closeLoanSubmit:function(){var a=this;Xa()("#closeApplication").prop("disabled",!0).addClass("submitted");var e=this.form;this.closeDpsApplication(e).then((function(){a.validation_errors||a.error_message?(a.errors=a.validation_errors,a.error=a.error_message):(a.errors=a.error=null,a.$swal({icon:"success",title:"Loan application closed!",text:"Loan application has been closed successfully",timer:3e3}),a.$router.push({name:"ShowLoanApplication",params:{application_id:a.application_id}})),Xa()("#closeApplication").prop("disabled",!1).removeClass("submitted")}))}}),mounted:function(){var a=this;this.isLoading=!0,this.getApplicationById(this.application_id).then((function(){a.isLoading=!1}))}};const oe=(0,t(3744).Z)(te,[["render",function(a,e,t,Qa,Ra,Xa){var Ya=(0,o.up)("router-link");return Xa.application&&!Ra.isLoading?((0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",n,[(0,o._)("div",r,[(0,o._)("div",s,[i,(0,o._)("div",c,[(0,o.Wm)(Ya,{to:{name:"ShowLoanApplication",params:{application_id:Xa.application.id}},class:"btn btn-outline-primary btn-sm"},{default:(0,o.w5)((function(){return[m]})),_:1},8,["to"])])]),(0,o._)("div",p,[(0,o._)("form",{onSubmit:e[13]||(e[13]=(0,o.iM)((function(){return Xa.closeLoanSubmit&&Xa.closeLoanSubmit.apply(Xa,arguments)}),["prevent"]))},[(0,o._)("div",u,[(0,o._)("div",d,[_,(0,o._)("div",b,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=function(a){return Ra.form.loan_amount=a}),placeholder:"0.00",class:"form-control",readonly:""},null,512),[[o.nr,Ra.form.loan_amount]]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",f,(0,o.zw)(Ra.errors.loan_amount?Ra.errors.loan_amount[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",y,[(0,o._)("div",v,[(0,o._)("div",g,[(0,o._)("label",h,"Service amount in "+(0,o.zw)(Xa.application.service)+"%",1)]),(0,o._)("div",w,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=function(a){return Ra.form.service_amount=a}),placeholder:"0.00",class:"form-control",readonly:""},null,512),[[o.nr,Ra.form.service_amount]]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",x,(0,o.zw)(Ra.errors.service_amount?Ra.errors.service_amount[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",k,[(0,o._)("div",D,[q,(0,o._)("div",z,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=function(a){return Ra.form.payable_loan_amount=a}),placeholder:"0.00",class:"form-control",readonly:""},null,512),[[o.nr,Ra.form.payable_loan_amount]]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",S,(0,o.zw)(Ra.errors.payable_loan_amount?Ra.errors.payable_loan_amount[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",L,[(0,o._)("div",O,[P,(0,o._)("div",A,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=function(a){return Ra.form.early_payment_discount=a}),placeholder:"0.00",class:"form-control",onKeyup:e[4]||(e[4]=function(){return a.handleEarlyPayment&&a.handleEarlyPayment.apply(a,arguments)})},null,544),[[o.nr,Ra.form.early_payment_discount]]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",U,(0,o.zw)(Ra.errors.early_payment_discount?Ra.errors.early_payment_discount[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",j,[(0,o._)("div",V,[B,(0,o._)("div",C,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=function(a){return Ra.form.beginning_balance=a}),placeholder:"0.00",class:"form-control",readonly:""},null,512),[[o.nr,Ra.form.beginning_balance]]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",F,(0,o.zw)(Ra.errors.beginning_balance?Ra.errors.beginning_balance[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",M,[(0,o._)("div",E,[I,(0,o._)("div",T,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=function(a){return Ra.form.payable_amount=a}),placeholder:"0.00",class:"form-control",readonly:""},null,512),[[o.nr,Ra.form.payable_amount]]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",$,(0,o.zw)(Ra.errors.payable_amount?Ra.errors.payable_amount[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",N,[(0,o._)("div",W,[H,(0,o._)("div",K,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=function(a){return Ra.form.payment=a}),placeholder:"0.00",class:"form-control"},null,512),[[o.nr,Ra.form.payment]]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",Z,(0,o.zw)(Ra.errors.payment?Ra.errors.payment[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",G,[(0,o._)("div",J,[Q,(0,o._)("div",R,[(0,o._)("div",X,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":e[8]||(e[8]=function(a){return Ra.form.payment_method=a}),class:"form-control"},Y,512),[[o.bM,Ra.form.payment_method]])]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",aa,(0,o.zw)(Ra.errors.payment_method?Ra.errors.payment_method[0]:""),1)):(0,o.kq)("",!0)])])]),(0,o._)("div",ea,[(0,o._)("div",ta,[oa,(0,o._)("div",la,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[9]||(e[9]=function(a){return Ra.form.payment_channel=a}),placeholder:"e.g: Bkash, Sonali  bank , Cash",class:"form-control"},null,512),[[o.nr,Ra.form.payment_channel]]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",na,(0,o.zw)(Ra.errors.payment_channel?Ra.errors.payment_channel[0]:""),1)):(0,o.kq)("",!0)])])]),"mobile_banking"===Ra.form.payment_method?((0,o.wg)(),(0,o.iD)("div",ra,[(0,o._)("div",sa,[ia,(0,o._)("div",ca,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[10]||(e[10]=function(a){return Ra.form.transaction_no=a}),placeholder:"transaction no",class:"form-control"},null,512),[[o.nr,Ra.form.transaction_no]]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",ma,(0,o.zw)(Ra.errors.transaction_no?Ra.errors.transaction_no[0]:""),1)):(0,o.kq)("",!0)])])])):(0,o.kq)("",!0),"bank"===Ra.form.payment_method?((0,o.wg)(),(0,o.iD)("div",pa,[(0,o._)("div",ua,[da,(0,o._)("div",_a,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[11]||(e[11]=function(a){return Ra.form.cheque_no=a}),placeholder:"cheque no",class:"form-control"},null,512),[[o.nr,Ra.form.cheque_no]]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",ba,(0,o.zw)(Ra.errors.cheque_no?Ra.errors.cheque_no[0]:""),1)):(0,o.kq)("",!0)])])])):(0,o.kq)("",!0),(0,o._)("div",fa,[(0,o._)("div",ya,[va,(0,o._)("div",ga,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=function(a){return Ra.form.note=a}),placeholder:"Write note...",class:"form-control"},null,512),[[o.nr,Ra.form.note]]),Ra.errors?((0,o.wg)(),(0,o.iD)("span",ha,(0,o.zw)(Ra.errors.note?Ra.errors.note[0]:""),1)):(0,o.kq)("",!0)])])]),wa],32)])])]),(0,o._)("div",xa,[(0,o._)("div",ka,[Da,(0,o._)("div",qa,[Xa.application.member?((0,o.wg)(),(0,o.iD)("div",za,[Xa.application.member.photo?((0,o.wg)(),(0,o.iD)("img",{key:0,src:Xa.application.member.photo,alt:"Member photo",class:"w-16"},null,8,Sa)):(0,o.kq)("",!0),(0,o.Wm)(Ya,{to:{name:"MemberShow",params:{member_id:Xa.application.member_id}},class:"text-primary"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,o.zw)(Xa.application.member.name),1)]})),_:1},8,["to"]),(0,o._)("h5",null,"Account: "+(0,o.zw)(Xa.application.member.account_no),1)])):(0,o.kq)("",!0),(0,o._)("div",La,[(0,o._)("table",Oa,[(0,o._)("tbody",null,[(0,o._)("tr",null,[Pa,(0,o._)("td",{class:"text-right",innerHTML:a.getStatusFormat(Xa.application.status)},null,8,Aa)]),(0,o._)("tr",null,[Ua,(0,o._)("td",ja,(0,o.zw)(a.numberFormat(Xa.application.loan_amount)),1)]),(0,o._)("tr",null,[Va,(0,o._)("td",Ba,(0,o.zw)(Xa.application.service)+"%",1)]),(0,o._)("tr",null,[Ca,(0,o._)("td",Fa,(0,o.zw)(a.numberFormat(Xa.application.service_amount)),1)]),(0,o._)("tr",null,[Ma,(0,o._)("td",Ea,(0,o.zw)(a.numberFormat(Xa.application.total_amount)),1)]),(0,o._)("tr",null,[Ia,(0,o._)("td",Ta,(0,o.zw)(Xa.application.installment),1)]),(0,o._)("tr",null,[(0,o._)("td",null,(0,o.zw)(a.ucFirst(Xa.application.dps_type))+" installment amount",1),(0,o._)("td",$a,(0,o.zw)(a.numberFormat(Xa.application.installment_amount)),1)]),Xa.application.prev_deposit?((0,o.wg)(),(0,o.iD)("tr",Na,[Wa,(0,o._)("td",Ha,(0,o.zw)(a.numberFormat(Xa.application.prev_deposit)),1)])):(0,o.kq)("",!0),(0,o._)("tr",null,[Ka,(0,o._)("td",Za,(0,o.zw)(Xa.application.paid_transactions.length),1)]),(0,o._)("tr",null,[Ga,(0,o._)("td",Ja,(0,o.zw)(a.numberFormat(Xa.application.balance)),1)])])])])])])])])):(0,o.kq)("",!0)}]])}}]);