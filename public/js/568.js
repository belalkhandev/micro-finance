"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[568],{4568:(e,t,n)=>{n.r(t),n.d(t,{default:()=>We});var a=n(821),o={key:0,class:"row"},l={class:"col-md-8"},r={class:"box"},s={class:"box-header"},i=(0,a._)("div",{class:"box-title"},[(0,a._)("h5",null,"DPS Close Form")],-1),c={class:"box-action"},p=(0,a.Uk)("Back"),m={class:"box-body"},d={class:"form-group"},u={class:"row"},_=(0,a._)("div",{class:"col-md-5 text-left"},[(0,a._)("label",{class:"col-form-label"},"Current Deposit Balance")],-1),f={class:"col-md-7"},b={key:0,class:"text-danger text-sm"},v={class:"form-group"},y={class:"row"},h=(0,a._)("div",{class:"col-md-5 text-left"},[(0,a._)("label",{class:"col-form-label"},"Incentive")],-1),g={class:"col-md-7"},w={class:"d-flex gap-2"},x={class:"w-100"},k={key:0,class:"text-danger text-sm"},D={class:"incentive-type d-flex align-items-center gap-2"},A={class:"form-group"},P={class:"row"},q=(0,a._)("div",{class:"col-md-5 text-left"},[(0,a._)("label",{class:"col-form-label"},"Incentive Amount")],-1),S={class:"col-md-7"},z={key:0,class:"text-danger text-sm"},O={class:"form-group"},C={class:"row"},I=(0,a._)("div",{class:"col-md-5 text-left"},[(0,a._)("label",{class:"col-form-label"},"Amount Payable")],-1),j={class:"col-md-7"},F={key:0,class:"text-danger text-sm"},U={class:"form-group"},V={class:"row"},B=(0,a._)("div",{class:"col-md-5 text-left"},[(0,a._)("label",{class:"col-form-label"},"Amount Paid")],-1),L={class:"col-md-7"},M={key:0,class:"text-danger text-sm"},T={class:"form-group"},$={class:"row"},N=(0,a._)("div",{class:"col-md-5 text-left"},[(0,a._)("label",{class:"col-form-label"},"Payment method")],-1),E={class:"col-md-7"},W={class:"select-wrap"},H=[(0,a._)("option",{value:""},"Select",-1),(0,a._)("option",{value:"cash"},"Cash",-1),(0,a._)("option",{value:"mobile_banking"},"Mobile banking",-1),(0,a._)("option",{value:"bank"},"Bank",-1)],K={key:0,class:"text-danger text-sm"},R={class:"form-group"},Z={class:"row"},G=(0,a._)("div",{class:"col-md-5 text-left"},[(0,a._)("label",{class:"col-form-label"},"Payment channel")],-1),J={class:"col-md-7"},Q={key:0,class:"text-danger text-sm"},X={key:0,class:"form-group"},Y={class:"row"},ee=(0,a._)("div",{class:"col-md-5 text-left"},[(0,a._)("label",{class:"col-form-label"},"Transaction No")],-1),te={class:"col-md-7"},ne={key:0,class:"text-danger text-sm"},ae={key:1,class:"form-group"},oe={class:"row"},le=(0,a._)("div",{class:"col-md-5 text-left"},[(0,a._)("label",{class:"col-form-label"},"Cheque No")],-1),re={class:"col-md-7"},se={key:0,class:"text-danger text-sm"},ie={class:"form-group"},ce={class:"row"},pe=(0,a._)("div",{class:"col-md-5 text-left"},[(0,a._)("label",{class:"col-form-label"},"Note")],-1),me={class:"col-md-7"},de={key:0,class:"text-danger text-sm"},ue=(0,a._)("div",{class:"text-right"},[(0,a._)("button",{type:"submit",class:"btn btn-primary",id:"closeApplication"},[(0,a._)("span",null,"Close DPS"),(0,a._)("div",{class:"spinner-border",role:"status"},[(0,a._)("span",{class:"visually-hidden"},"Loading...")])])],-1),_e={class:"col-md-4"},fe={class:"box"},be=(0,a._)("div",{class:"box-header"},[(0,a._)("div",{class:"box-title"},[(0,a._)("h5",null,"DPS Information")])],-1),ve={class:"box-body"},ye={key:0,class:"dps-application-member mb-4"},he=["src"],ge={class:"application-info"},we={class:"table table-borderless table-striped"},xe=(0,a._)("td",null,"DPS Status",-1),ke=["innerHTML"],De=(0,a._)("td",null,"Deposit Duration",-1),Ae={class:"text-right"},Pe={class:"text-right"},qe=(0,a._)("td",null,"Depositable Amount",-1),Se={class:"text-right"},ze=(0,a._)("td",null,"Receivable Amount",-1),Oe={class:"text-right"},Ce=(0,a._)("td",null,"Profitable Amount",-1),Ie={class:"text-right"},je=(0,a._)("td",null,"Total transactions",-1),Fe={class:"text-right"},Ue=(0,a._)("td",null,"DPS Balance",-1),Ve={class:"text-right"};var Be=n(8637),Le=n(9755),Me=n.n(Le);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ee={name:"ShowDpsApplication",data:function(){return{application_id:this.$route.params.application_id,isLoading:!1,errors:null,error:null,form:{application_id:this.$route.params.application_id,deposit_balance:0,incentive:null,incentive_type:"flat",incentive_amount:null,payable_amount:null,payment:null,payment_method:"cash",payment_channel:null,transaction_no:null,cheque_no:null,note:null}}},computed:$e($e({},(0,Be.Se)({getApplication:"dps/application",validation_errors:"validation_errors",error_message:"error_message"})),{},{application:function(){var e=this.getApplication;return e&&this.form.application_id&&(this.form.deposit_balance=e.balance,this.form.payable_amount=e.balance),e}}),methods:$e($e({},(0,Be.nv)({getApplicationById:"dps/getApplicationById",closeDpsApplication:"dps/closeApplication"})),{},{handleIncentiveType:function(e){this.form.incentive_type=e,this.handleIncentive()},handleIncentive:function(){"flat"===this.form.incentive_type?this.form.incentive_amount=this.form.incentive||0:"percentage"===this.form.incentive_type&&(this.form.incentive_amount=parseFloat(this.form.deposit_balance*(this.form.incentive/100))),this.form.payable_amount=parseFloat(this.form.deposit_balance)+parseFloat(this.form.incentive_amount)},closeDpsSubmit:function(){var e=this;Me()("#closeApplication").prop("disabled",!0).addClass("submitted");var t=this.form;this.closeDpsApplication(t).then((function(){e.validation_errors||e.error_message?(e.errors=e.validation_errors,e.error=e.error_message):(e.errors=e.error=null,e.$swal({icon:"success",title:"DPS Closed!",text:"Dps Application has been closed successfully",timer:3e3}),e.$router.push({name:"showDPSApplication",params:{application_id:e.application_id}})),Me()("#closeApplication").prop("disabled",!1).removeClass("submitted")}))}}),mounted:function(){var e=this;this.isLoading=!0,this.getApplicationById(this.application_id).then((function(){e.isLoading=!1,e.getApplication||e.$router.push({name:"PageNotFound"})}))}};const We=(0,n(3744).Z)(Ee,[["render",function(e,t,n,Be,Le,Me){var Te=(0,a.up)("router-link");return Me.application&&!Le.isLoading?((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",l,[(0,a._)("div",r,[(0,a._)("div",s,[i,(0,a._)("div",c,[(0,a.Wm)(Te,{to:{name:"showDPSApplication",params:{application_id:Me.application.id}},class:"btn btn-outline-primary btn-sm"},{default:(0,a.w5)((function(){return[p]})),_:1},8,["to"])])]),(0,a._)("div",m,[(0,a._)("form",{onSubmit:t[13]||(t[13]=(0,a.iM)((function(){return Me.closeDpsSubmit&&Me.closeDpsSubmit.apply(Me,arguments)}),["prevent"]))},[(0,a._)("div",d,[(0,a._)("div",u,[_,(0,a._)("div",f,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=function(e){return Le.form.deposit_balance=e}),placeholder:"Enter deposit amount",class:"form-control",readonly:""},null,512),[[a.nr,Le.form.deposit_balance]]),Le.errors?((0,a.wg)(),(0,a.iD)("span",b,(0,a.zw)(Le.errors.deposit_balance?Le.errors.deposit_balance[0]:""),1)):(0,a.kq)("",!0)])])]),(0,a._)("div",v,[(0,a._)("div",y,[h,(0,a._)("div",g,[(0,a._)("div",w,[(0,a._)("div",x,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=function(e){return Le.form.incentive=e}),onKeyup:t[2]||(t[2]=function(){return Me.handleIncentive&&Me.handleIncentive.apply(Me,arguments)}),placeholder:"0.00",class:"form-control"},null,544),[[a.nr,Le.form.incentive]]),Le.errors?((0,a.wg)(),(0,a.iD)("span",k,(0,a.zw)(Le.errors.incentive?Le.errors.incentive[0]:""),1)):(0,a.kq)("",!0)]),(0,a._)("div",D,[(0,a._)("span",{class:(0,a.C_)(["btn btn-sm btn-outline-secondary","flat"===Le.form.incentive_type?"btn-primary":""]),onClick:t[3]||(t[3]=function(e){return Me.handleIncentiveType("flat")})},"à§³",2),(0,a._)("span",{class:(0,a.C_)(["btn btn-sm btn-outline-secondary","percentage"===Le.form.incentive_type?"btn-primary":""]),onClick:t[4]||(t[4]=function(e){return Me.handleIncentiveType("percentage")})},"%",2)])])])])]),(0,a._)("div",A,[(0,a._)("div",P,[q,(0,a._)("div",S,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=function(e){return Le.form.incentive_amount=e}),placeholder:"0.00",class:"form-control",readonly:""},null,512),[[a.nr,Le.form.incentive_amount]]),Le.errors?((0,a.wg)(),(0,a.iD)("span",z,(0,a.zw)(Le.errors.incentive_amount?Le.errors.incentive_amount[0]:""),1)):(0,a.kq)("",!0)])])]),(0,a._)("div",O,[(0,a._)("div",C,[I,(0,a._)("div",j,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=function(e){return Le.form.payable_amount=e}),placeholder:"0.00",class:"form-control",readonly:""},null,512),[[a.nr,Le.form.payable_amount]]),Le.errors?((0,a.wg)(),(0,a.iD)("span",F,(0,a.zw)(Le.errors.payable_amount?Le.errors.payable_amount[0]:""),1)):(0,a.kq)("",!0)])])]),(0,a._)("div",U,[(0,a._)("div",V,[B,(0,a._)("div",L,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=function(e){return Le.form.payment=e}),placeholder:"0.00",class:"form-control"},null,512),[[a.nr,Le.form.payment]]),Le.errors?((0,a.wg)(),(0,a.iD)("span",M,(0,a.zw)(Le.errors.payment?Le.errors.payment[0]:""),1)):(0,a.kq)("",!0)])])]),(0,a._)("div",T,[(0,a._)("div",$,[N,(0,a._)("div",E,[(0,a._)("div",W,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[8]||(t[8]=function(e){return Le.form.payment_method=e}),class:"form-control"},H,512),[[a.bM,Le.form.payment_method]])]),Le.errors?((0,a.wg)(),(0,a.iD)("span",K,(0,a.zw)(Le.errors.payment_method?Le.errors.payment_method[0]:""),1)):(0,a.kq)("",!0)])])]),(0,a._)("div",R,[(0,a._)("div",Z,[G,(0,a._)("div",J,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[9]||(t[9]=function(e){return Le.form.payment_channel=e}),placeholder:"e.g: Bkash, Sonali  bank , Cash",class:"form-control"},null,512),[[a.nr,Le.form.payment_channel]]),Le.errors?((0,a.wg)(),(0,a.iD)("span",Q,(0,a.zw)(Le.errors.payment_channel?Le.errors.payment_channel[0]:""),1)):(0,a.kq)("",!0)])])]),"mobile_banking"===Le.form.payment_method?((0,a.wg)(),(0,a.iD)("div",X,[(0,a._)("div",Y,[ee,(0,a._)("div",te,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[10]||(t[10]=function(e){return Le.form.transaction_no=e}),placeholder:"transaction no",class:"form-control"},null,512),[[a.nr,Le.form.transaction_no]]),Le.errors?((0,a.wg)(),(0,a.iD)("span",ne,(0,a.zw)(Le.errors.transaction_no?Le.errors.transaction_no[0]:""),1)):(0,a.kq)("",!0)])])])):(0,a.kq)("",!0),"bank"===Le.form.payment_method?((0,a.wg)(),(0,a.iD)("div",ae,[(0,a._)("div",oe,[le,(0,a._)("div",re,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[11]||(t[11]=function(e){return Le.form.cheque_no=e}),placeholder:"cheque no",class:"form-control"},null,512),[[a.nr,Le.form.cheque_no]]),Le.errors?((0,a.wg)(),(0,a.iD)("span",se,(0,a.zw)(Le.errors.cheque_no?Le.errors.cheque_no[0]:""),1)):(0,a.kq)("",!0)])])])):(0,a.kq)("",!0),(0,a._)("div",ie,[(0,a._)("div",ce,[pe,(0,a._)("div",me,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[12]||(t[12]=function(e){return Le.form.note=e}),placeholder:"Write note...",class:"form-control"},null,512),[[a.nr,Le.form.note]]),Le.errors?((0,a.wg)(),(0,a.iD)("span",de,(0,a.zw)(Le.errors.note?Le.errors.note[0]:""),1)):(0,a.kq)("",!0)])])]),ue],32)])])]),(0,a._)("div",_e,[(0,a._)("div",fe,[be,(0,a._)("div",ve,[Me.application.member?((0,a.wg)(),(0,a.iD)("div",ye,[Me.application.member.photo?((0,a.wg)(),(0,a.iD)("img",{key:0,src:Me.application.member.photo,alt:"Member photo",class:"w-16"},null,8,he)):(0,a.kq)("",!0),(0,a.Wm)(Te,{to:{name:"MemberShow",params:{member_id:Me.application.member_id}},class:"text-primary"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,a.zw)(Me.application.member.name),1)]})),_:1},8,["to"]),(0,a._)("h5",null,"Account: "+(0,a.zw)(Me.application.member.account_no),1)])):(0,a.kq)("",!0),(0,a._)("div",ge,[(0,a._)("table",we,[(0,a._)("tbody",null,[(0,a._)("tr",null,[xe,(0,a._)("td",{class:"text-right",innerHTML:e.getStatusFormat(Me.application.status)},null,8,ke)]),(0,a._)("tr",null,[De,(0,a._)("td",Ae,(0,a.zw)(Me.application.year)+" years",1)]),(0,a._)("tr",null,[(0,a._)("td",null,(0,a.zw)(e.ucFirst(Me.application.dps_type))+" Deposit",1),(0,a._)("td",Pe,(0,a.zw)(e.numberFormat(Me.application.dps_amount,2)),1)]),(0,a._)("tr",null,[qe,(0,a._)("td",Se,(0,a.zw)(e.numberFormat(Me.application.total_amount)),1)]),(0,a._)("tr",null,[ze,(0,a._)("td",Oe,(0,a.zw)(e.numberFormat(Me.application.receiving)),1)]),(0,a._)("tr",null,[Ce,(0,a._)("td",Ie,(0,a.zw)(e.numberFormat(Me.application.profit)),1)]),(0,a._)("tr",null,[je,(0,a._)("td",Fe,(0,a.zw)(Me.application.transactions.length),1)]),(0,a._)("tr",null,[Ue,(0,a._)("td",Ve,(0,a.zw)(e.numberFormat(Me.application.balance)),1)])])])])])])])])):(0,a.kq)("",!0)}]])}}]);