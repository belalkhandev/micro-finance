"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7920],{6908:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(3645),n=a.n(i)()((function(e){return e[1]}));n.push([e.id,".btn.btn-sm.btn-outline-info.btn-text{line-height:1}.member-select .member-list{z-index:999}.widget .widget-body p{color:#000}",""]);const s=n},7823:(e,t,a)=>{a.d(t,{Z:()=>m});var i=a(821);var n=(e,t)=>{const a=e.__vccOpts||e;for(const[e,i]of t)a[e]=i;return a};const s={inheritAttrs:!1,emits:["pagination-change-page"],components:{RenderlessLaravelVuePagination:{emits:["pagination-change-page"],props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},showDisabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator:e=>-1!==["small","default","large"].indexOf(e)},align:{type:String,default:"left",validator:e=>-1!==["left","center","right"].indexOf(e)}},computed:{isApiResource(){return!!this.data.meta},currentPage(){return this.isApiResource?this.data.meta.current_page:this.data.current_page},firstPageUrl(){return this.isApiResource?this.data.links.first:null},from(){return this.isApiResource?this.data.meta.from:this.data.from},lastPage(){return this.isApiResource?this.data.meta.last_page:this.data.last_page},lastPageUrl(){return this.isApiResource?this.data.links.last:null},nextPageUrl(){return this.isApiResource?this.data.links.next:this.data.next_page_url},perPage(){return this.isApiResource?this.data.meta.per_page:this.data.per_page},prevPageUrl(){return this.isApiResource?this.data.links.prev:this.data.prev_page_url},to(){return this.isApiResource?this.data.meta.to:this.data.to},total(){return this.isApiResource?this.data.meta.total:this.data.total},pageRange(){if(-1===this.limit)return 0;if(0===this.limit)return this.lastPage;for(var e,t=this.currentPage,a=this.lastPage,i=this.limit,n=t-i,s=t+i+1,l=[],r=[],o=1;o<=a;o++)(1===o||o===a||o>=n&&o<s)&&l.push(o);return l.forEach((function(t){e&&(t-e==2?r.push(e+1):t-e!=1&&r.push("...")),r.push(t),e=t})),r}},methods:{previousPage(){this.selectPage(this.currentPage-1)},nextPage(){this.selectPage(this.currentPage+1)},selectPage(e){"..."!==e&&this.$emit("pagination-change-page",e)}},render(){return this.$slots.default({data:this.data,limit:this.limit,showDisabled:this.showDisabled,size:this.size,align:this.align,computed:{isApiResource:this.isApiResource,currentPage:this.currentPage,firstPageUrl:this.firstPageUrl,from:this.from,lastPage:this.lastPage,lastPageUrl:this.lastPageUrl,nextPageUrl:this.nextPageUrl,perPage:this.perPage,prevPageUrl:this.prevPageUrl,to:this.to,total:this.total,pageRange:this.pageRange},prevButtonEvents:{click:e=>{e.preventDefault(),this.previousPage()}},nextButtonEvents:{click:e=>{e.preventDefault(),this.nextPage()}},pageButtonEvents:e=>({click:t=>{t.preventDefault(),this.selectPage(e)}})})}}},props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},showDisabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator:e=>-1!==["small","default","large"].indexOf(e)},align:{type:String,default:"left",validator:e=>-1!==["left","center","right"].indexOf(e)}},methods:{onPaginationChangePage(e){this.$emit("pagination-change-page",e)}}},l=["tabindex"],r=(0,i._)("span",{"aria-hidden":"true"},"«",-1),o=(0,i._)("span",{class:"sr-only"},"Previous",-1),c={key:0,class:"sr-only"},u=["tabindex"],d=(0,i._)("span",{"aria-hidden":"true"},"»",-1),p=(0,i._)("span",{class:"sr-only"},"Next",-1);var m=n(s,[["render",function(e,t,a,n,s,m){const h=(0,i.up)("RenderlessLaravelVuePagination");return(0,i.wg)(),(0,i.j4)(h,{data:a.data,limit:a.limit,"show-disabled":a.showDisabled,size:a.size,align:a.align,onPaginationChangePage:m.onPaginationChangePage},{default:(0,i.w5)((t=>[t.computed.total>t.computed.perPage?((0,i.wg)(),(0,i.iD)("ul",(0,i.dG)({key:0},e.$attrs,{class:["pagination",{"pagination-sm":"small"==t.size,"pagination-lg":"large"==t.size,"justify-content-center":"center"==t.align,"justify-content-end":"right"==t.align}]}),[t.computed.prevPageUrl||t.showDisabled?((0,i.wg)(),(0,i.iD)("li",{key:0,class:(0,i.C_)(["page-item pagination-prev-nav",{disabled:!t.computed.prevPageUrl}])},[(0,i._)("a",(0,i.dG)({class:"page-link",href:"#","aria-label":"Previous",tabindex:!t.computed.prevPageUrl&&-1},(0,i.mx)(t.prevButtonEvents)),[(0,i.WI)(e.$slots,"prev-nav",{},(()=>[r,o]))],16,l)],2)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.computed.pageRange,((e,a)=>((0,i.wg)(),(0,i.iD)("li",{class:(0,i.C_)(["page-item pagination-page-nav",{active:e==t.computed.currentPage}]),key:a},[(0,i._)("a",(0,i.dG)({class:"page-link",href:"#"},(0,i.mx)(t.pageButtonEvents(e))),[(0,i.Uk)((0,i.zw)(e)+" ",1),e==t.computed.currentPage?((0,i.wg)(),(0,i.iD)("span",c,"(current)")):(0,i.kq)("",!0)],16)],2)))),128)),t.computed.nextPageUrl||t.showDisabled?((0,i.wg)(),(0,i.iD)("li",{key:1,class:(0,i.C_)(["page-item pagination-next-nav",{disabled:!t.computed.nextPageUrl}])},[(0,i._)("a",(0,i.dG)({class:"page-link",href:"#","aria-label":"Next",tabindex:!t.computed.nextPageUrl&&-1},(0,i.mx)(t.nextButtonEvents)),[(0,i.WI)(e.$slots,"next-nav",{},(()=>[d,p]))],16,u)],2)):(0,i.kq)("",!0)],16)):(0,i.kq)("",!0)])),_:3},8,["data","limit","show-disabled","size","align","onPaginationChangePage"])}]])},7920:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ge});var i=a(821),n={key:0,class:"row mb-4"},s={class:"col-md-4"},l={class:"widget widget-primary animate__animated animate__fadeIn"},r=(0,i._)("div",{class:"widget-header"},[(0,i._)("h5",{class:"title"},"Total DPS"),(0,i._)("span",null,[(0,i._)("i",{class:"bx bx-group"})])],-1),o={class:"widget-body"},c={class:"col-md-4"},u={class:"widget widget-success animate__animated animate__fadeIn"},d=(0,i._)("div",{class:"widget-header"},[(0,i._)("h5",{class:"title"},"Total Collection"),(0,i._)("span",null,[(0,i._)("i",{class:"bx bx-group"})])],-1),p={class:"widget-body"},m={class:"col-md-4"},h={class:"widget widget-danger animate__animated animate__fadeIn"},g=(0,i._)("div",{class:"widget-header"},[(0,i._)("h5",{class:"title"},"Due Amount"),(0,i._)("span",null,[(0,i._)("i",{class:"bx bx-group"})])],-1),_={class:"widget-body"},f={key:1,class:"widget widget-secondary mb-4"},b=(0,i._)("div",{class:"widget-header"},[(0,i._)("h5",{class:"title"},"Filtering"),(0,i._)("span",null,[(0,i._)("i",{class:"bx bx-filter-alt"})])],-1),w={class:"widget-body"},v={class:"row"},y={class:"col-md-4"},P=(0,i._)("span",{class:"select-icon"},[(0,i._)("i",{class:"bx bx-chevron-down"})],-1),x={class:"member-list"},k={class:"member-search"},D=[(0,i._)("i",{class:"bx bx-x"},null,-1)],A={class:"members"},C=["onClick"],O={class:"col-md-3"},z={class:"col-md-3"},U={class:"col-md-2"},F=(0,i._)("button",{type:"submit",class:"btn btn-sm btn-success"},"Filter",-1),R={class:"row"},S={class:"col-md-12"},M={class:"box"},j={class:"box-header"},L=(0,i._)("div",{class:"box-title"},[(0,i._)("h4",null,"DPS application list")],-1),B={class:"box-action"},W=(0,i.Uk)("New DPS Application"),E={class:"box-body"},T={class:"table"},V=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"#"),(0,i._)("th",null,"Member"),(0,i._)("th",null,"Deposit"),(0,i._)("th",null,"Deposit Amt."),(0,i._)("th",null,"Receivable"),(0,i._)("th",null,"Status"),(0,i._)("th",null,"Created"),(0,i._)("th",null,"Operations")])],-1),q={class:"application-member"},I=["src"],$=["innerHTML"],Y={key:0},H={class:"action"},N=(0,i._)("i",{class:"bx bx-show-alt"},null,-1),Z=(0,i._)("i",{class:"bx bx-edit"},null,-1),G=["onClick"],K=[(0,i._)("i",{class:"bx bx-trash"},null,-1)],J={key:1},Q=[(0,i._)("td",{colspan:"9"},"No application found",-1)],X={class:"box-footer text-right"},ee={key:0,class:"pagination"},te={class:"pagination-data"},ae=(0,i._)("div",{class:"col-md-4"},null,-1);var ie=a(8637),ne=a(7823),se=a(9755),le=a.n(se);function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){ce(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ue={name:"Index",components:{Pagination:ne.Z},data:function(){return{is_filter_pagination:!1,form:{from_date:"",to_date:"",member_id:""},from_date:"",to_date:"",member_input_text:"",search_key:"",isOpen:!1,openFilter:!1}},computed:oe(oe({},(0,ie.Se)({applications:"dps/applications",dps_total:"dps/statistics",members:"member/searchData"})),{},{filterApplications:function(){return this.applications},filterMembers:function(){var e=this;return this.members&&this.members.length&&this.search_key.length>1?this.members.filter((function(t){return t.account_no.toLowerCase().includes(e.search_key.toLowerCase())||t.name.toLowerCase().includes(e.search_key.toLowerCase())||t.phone.toLowerCase().includes(e.search_key.toLowerCase())})):this.members}}),methods:oe(oe({},(0,ie.nv)({getApplications:"dps/getApplications",getTotalDps:"dps/getDpsStatistics",deleteApplication:"dps/deleteApplication",filterDpsApplications:"dps/filterApplications"})),{},{deleteConfirm:function(e){var t=this;this.hasPermission("delete_application")?this.$swal({title:"Really want to delete!",text:"Are you sure? You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#5430d6",confirmButtonText:"Yes, Delete it!",cancelButtonColor:"#c82333"}).then((function(a){a.isConfirmed&&t.deleteApplication(e).then((function(){t.error_message?t.error=t.error_message:t.$swal({icon:"success",title:"Congratulation!",text:"User has been deleted successfully"})}))})):this.message403()},getResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.is_filter_pagination){var t=this.form;t.page=e,this.filterDpsApplications(t)}else this.getApplications(e)},showMemberList:function(){this.isOpen=!this.isOpen,le()(".member-input .form-control").focus()},closeMemberList:function(){this.isOpen=!this.isOpen},chooseMember:function(e){this.form.member_id=e.id,this.member_input_text=e.account_no+"-"+e.name,this.search_key="",this.isOpen=!this.isOpen},filterSubmit:function(){this.is_filter_pagination=!0,this.filterDpsApplications(this.form)},clearFilterForm:function(){this.is_filter_pagination=!1,this.getResults(1),this.form.member_id="",this.form.from_date="",this.form.to_date="",this.member_input_text="",this.from_date="",this.to_date=""}}),mounted:function(){this.getResults(1),this.getTotalDps()},watch:{from_date:function(){var e=this.datePickerFormat(this.from_date);this.form.from_date="Invalid date"!=e?e:""},to_date:function(){var e=this.datePickerFormat(this.to_date);this.form.to_date="Invalid date"!=e?e:""}}};var de=a(2446),pe=a.n(de),me=a(6908),he={insert:"head",singleton:!1};pe()(me.Z,he);me.Z.locals;const ge=(0,a(3744).Z)(ue,[["render",function(e,t,a,ie,ne,se){var le=(0,i.up)("router-link"),re=(0,i.up)("Datepicker"),oe=(0,i.up)("Pagination");return(0,i.wg)(),(0,i.iD)(i.HY,null,[e.dps_total?((0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",s,[(0,i._)("div",l,[r,(0,i._)("div",o,[(0,i.Wm)(le,{to:"/members"},{default:(0,i.w5)((function(){return[(0,i._)("h3",null,(0,i.zw)(e.numberFormat(e.dps_total.total_amounts,2)),1)]})),_:1})])])]),(0,i._)("div",c,[(0,i._)("div",u,[d,(0,i._)("div",p,[(0,i.Wm)(le,{to:"/members"},{default:(0,i.w5)((function(){return[(0,i._)("h3",null,(0,i.zw)(e.numberFormat(e.dps_total.collections,2)),1)]})),_:1})])])]),(0,i._)("div",m,[(0,i._)("div",h,[g,(0,i._)("div",_,[(0,i.Wm)(le,{to:"/members"},{default:(0,i.w5)((function(){return[(0,i._)("h3",null,(0,i.zw)(e.numberFormat(e.dps_total.dues,2)),1)]})),_:1})])])])])):(0,i.kq)("",!0),ne.openFilter?((0,i.wg)(),(0,i.iD)("div",f,[b,(0,i._)("div",w,[(0,i._)("form",{onSubmit:t[7]||(t[7]=(0,i.iM)((function(){return se.filterSubmit&&se.filterSubmit.apply(se,arguments)}),["prevent"]))},[(0,i._)("div",v,[(0,i._)("div",y,[(0,i._)("div",{class:(0,i.C_)(["member-select",{open:ne.isOpen}])},[(0,i._)("div",{class:"member-input",onClick:t[1]||(t[1]=(0,i.iM)((function(){return se.showMemberList&&se.showMemberList.apply(se,arguments)}),["prevent"]))},[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return ne.member_input_text=e}),class:"form-control",placeholder:"Choose Member",readonly:""},null,512),[[i.nr,ne.member_input_text]]),P]),(0,i._)("div",x,[(0,i._)("div",k,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=function(e){return ne.search_key=e}),placeholder:"Search by account no, name, phone",class:"form-control"},null,512),[[i.nr,ne.search_key]]),(0,i._)("span",{class:"list-close",onClick:t[3]||(t[3]=function(){return se.closeMemberList&&se.closeMemberList.apply(se,arguments)})},D)]),(0,i._)("div",A,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(se.filterMembers,(function(e,t){return(0,i.wg)(),(0,i.iD)("div",{class:"member text-left",key:e.id,onClick:(0,i.iM)((function(t){return se.chooseMember(e)}),["prevent"])},[(0,i._)("p",null,(0,i.zw)(e.account_no)+" - "+(0,i.zw)(e.name)+" - "+(0,i.zw)(e.phone),1)],8,C)})),128))])])],2)]),(0,i._)("div",O,[(0,i.Wm)(re,{modelValue:ne.from_date,"onUpdate:modelValue":t[4]||(t[4]=function(e){return ne.from_date=e}),format:"dd-MM-yyyy",enableTimePicker:!1,autoApply:"",placeholder:"Select From Date"},null,8,["modelValue"])]),(0,i._)("div",z,[(0,i.Wm)(re,{modelValue:ne.to_date,"onUpdate:modelValue":t[5]||(t[5]=function(e){return ne.to_date=e}),format:"dd-MM-yyyy",enableTimePicker:!1,autoApply:"",placeholder:"Select To Date"},null,8,["modelValue"])]),(0,i._)("div",U,[F,ne.is_filter_pagination?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",onClick:t[6]||(t[6]=(0,i.iM)((function(){return se.clearFilterForm&&se.clearFilterForm.apply(se,arguments)}),["prevent"])),class:"btn btn-sm btn-danger ml-2"},"Clear")):(0,i.kq)("",!0)])])],32)])])):(0,i.kq)("",!0),(0,i._)("div",R,[(0,i._)("div",S,[(0,i._)("div",M,[(0,i._)("div",j,[L,(0,i._)("div",B,[(0,i._)("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:t[8]||(t[8]=function(e){return ne.openFilter=!ne.openFilter})},"Filter"),(0,i.Wm)(le,{to:{name:"CreateDPS"},class:"btn btn-sm btn-primary"},{default:(0,i.w5)((function(){return[W]})),_:1})])]),(0,i._)("div",E,[(0,i._)("table",T,[V,(0,i._)("tbody",null,[se.filterApplications&&se.filterApplications.data?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(se.filterApplications.data,(function(t,a){return(0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i._)("td",null,(0,i.zw)(se.filterApplications.from+a),1),(0,i._)("td",null,[(0,i._)("div",q,[(0,i._)("img",{src:t.member?t.member.photo:"",alt:"",class:"w-8 rounded"},null,8,I),(0,i._)("div",null,[(0,i.Wm)(le,{to:{name:"MemberShow",params:{member_id:t.member_id}},class:"text-primary"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,i.zw)(t.member.name),1)]})),_:2},1032,["to"]),(0,i._)("p",null,"Acc. no: "+(0,i.zw)(t.member.account_no),1)])])]),(0,i._)("td",null,[(0,i._)("p",null,(0,i.zw)(e.ucFirst(t.dps_type))+": "+(0,i.zw)(e.numberFormat(t.dps_amount,2)),1),(0,i._)("p",null,"Years: "+(0,i.zw)(t.year),1)]),(0,i._)("td",null,(0,i.zw)(e.numberFormat(t.total_amount,2)),1),(0,i._)("td",null,(0,i.zw)(e.numberFormat(t.receiving,2)),1),(0,i._)("td",{innerHTML:e.getStatusFormat(t.status)},null,8,$),(0,i._)("td",null,[t.created_user?((0,i.wg)(),(0,i.iD)("p",Y,(0,i.zw)(t.created_user.name),1)):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,i.zw)(e.userFormattedDate(t.created_at)),1)]),(0,i._)("td",null,[(0,i._)("div",H,[(0,i.Wm)(le,{to:{name:"showDPSApplication",params:{application_id:t.id}},class:"btn btn-outline-primary btn-sm"},{default:(0,i.w5)((function(){return[N]})),_:2},1032,["to"]),(0,i.Wm)(le,{to:{name:"EditDPSApplication",params:{application_id:t.id}},class:"btn btn-outline-warning btn-sm"},{default:(0,i.w5)((function(){return[Z]})),_:2},1032,["to"]),(0,i._)("a",{href:"#",class:"btn btn-outline-danger btn-sm",onClick:(0,i.iM)((function(e){return se.deleteConfirm(t.id)}),["prevent"])},K,8,G)])])])})),128)):((0,i.wg)(),(0,i.iD)("tr",J,Q))])])]),(0,i._)("div",X,[se.filterApplications?((0,i.wg)(),(0,i.iD)("div",ee,[(0,i._)("p",te," Page "+(0,i.zw)(se.filterApplications.current_page)+" Showing "+(0,i.zw)(se.filterApplications.from)+" to "+(0,i.zw)(se.filterApplications.to)+" of "+(0,i.zw)(se.filterApplications.total)+" Data ",1),(0,i.Wm)(oe,{data:se.filterApplications,onPaginationChangePage:se.getResults,limit:6},null,8,["data","onPaginationChangePage"])])):(0,i.kq)("",!0)])])]),ae])],64)}]])}}]);